(()=>{var e={4780:e=>{e.exports={active:!1}},7788:e=>{e.exports.DefaultHostValues={host:"127.0.0.1",port:9600},e.exports.DefaultOptions={timeout:2e3},e.exports.DefaultFinsHeader={ICF:128,RSV:0,GCT:2,DNA:0,DA1:0,DA2:0,SNA:0,SA1:34,SA2:0,SID:0},e.exports.Commands={CONTROLLER_STATUS_READ:[6,1],MEMORY_AREA_READ:[1,1],MEMORY_AREA_WRITE:[1,2],MEMORY_AREA_FILL:[1,3],RUN:[4,1],STOP:[4,2]},e.exports.FatalErrorData={SYSTEM_ERROR:64,IO_SETTING_ERROR:1024,IO_POINT_OVERFLOW:2048,CPU_BUS_ERROR:16384,MEMORY_ERROR:32768},e.exports.NonFatalErrorData={PC_LINK_ERROR:1,HOST_LINK_ERROR:2,BATTERY_ERROR:16,REMOTE_IO_ERROR:32,SPECIAL_IO_UNIT_ERROR:256,IO_COLLATE_ERROR:512,SYSTEM_ERROR:32768},e.exports.Status={CPU_STANDBY:128,STOP:0,RUN:1},e.exports.Modes={MONITOR:2,DEBUG:1,RUN:4},e.exports.MemoryAreas={E:160,C:176,W:177,H:178,A:179,D:130},e.exports.Errors={"0000":"Completed normally","0001":"Service was interrupted","0101":"Local node not part of Network","0102":"Token time-out, node number too large","0103":"Number of transmit retries exceeded","0104":"Maximum number of frames exceeded","0105":"Node number setting error (range)","0106":"Node number duplication error"}},9317:(e,t,r)=>{var a=r(7194),s=r(9023).inherits,i=r(6261).EventEmitter,n=r(7788);function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);i.call(this),o.init.call(this,e,t,r)}e.exports=o,s(o,i),_compareArrays=function(e,t){if(e.length!==t.length)return!1;for(var r=e.length;r--;)if(e[r]!==t[r])return!1;return!0},_mergeArrays=function(e){for(var t=[],r=0,a=e.length;r<a;r++){var s=Object.prototype.toString.call(e[r]).split(" ").pop().split("]").shift().toLowerCase();s&&(t=t.concat(/^(array|collection|arguments|object)$/.test(s)?_mergeArrays(e[r]):e[r]))}return t},_keyFromValue=function(e,t){return Object.keys(e).filter((function(r){return e[r]===t}))[0]},_padHex=function(e,t){return"0"*e+t.toString(16).substr(-e)},_wordsToBytes=function(e){var t=[];if(e.length)for(var r in e)t.push((65280&e[r])>>8),t.push(255&e[r]);else t.push((65280&e)>>8),t.push(255&e);return t},_translateMemoryAddress=function(e){var t=e.match(/(.)([0-9]*):?([0-9]*)/),r={MemoryArea:t[1],Address:t[2],Bit:t[3]},a=[];return n.MemoryAreas[r.MemoryArea]?a.push([n.MemoryAreas[r.MemoryArea]]):a.push([130]),a.push(_wordsToBytes([r.Address])),a.push([0]),_mergeArrays(a)},_incrementSID=function(e){return e%254+1},_buildHeader=function(e){return[e.ICF,e.RSV,e.GCT,e.DNA,e.DA1,e.DA2,e.SNA,e.SA1,e.SA2,e.SID]},_buildPacket=function(e){return _mergeArrays(e)},_getResponseType=function(e){var t=[];return t.push(e[10]),t.push(e[11]),t},_processDefault=function(e,t){var r=e[9],a=e.slice(10,12).toString("hex"),s=e.slice(12,14).toString("hex");return{remotehost:t.address,sid:r,command:a,response:s}},_processStatusRead=function(e,t){var r=e[9],a=e.slice(10,12).toString("hex"),s=e.slice(12,14).toString("hex"),i=e[14],o=e[15],l={},c={};for(var d in n.FatalErrorData)e.readInt16BE(17)&n.FatalErrorData[d]&&l.push(d);for(var d in n.nonFatalErrorData)e.readInt16BE(18)&n.nonFatalErrorData[d]&&c.push(d);var u=n.Status,p=n.Modes;return{remotehost:t.address,sid:r,command:a,response:s,status:_keyFromValue(u,i),mode:_keyFromValue(p,o),fatalErrorData:l||null,nonFatalErrorData:c||null}},_processMemoryAreaRead=function(e,t){for(var r=[],a=e[9],s=e.slice(10,12).toString("hex"),i=e.slice(12,14).toString("hex"),n=e.slice(14,e.length),o=0;o<n.length;o+=2)r.push(n.readInt16BE(o));return{remotehost:t.address,sid:a,command:s,response:i,values:r}},_processReply=function(e,t){var r=n.Commands;switch(_getResponseType(e).join(" ")){case r.CONTROLLER_STATUS_READ.join(" "):return _processStatusRead(e,t);case r.MEMORY_AREA_READ.join(" "):return _processMemoryAreaRead(e,t);default:return _processDefault(e,t)}},_decodePacket=function(e,t){for(var r=[],a=e.slice(10,12).toString("hex"),s=e.slice(12,14).toString("hex"),i=e.slice(14,e.length),n=0;n<i.length;n+=2)r.push(i.readInt16BE(n));return{remotehost:t.address,command:a,code:s,values:r}},o.init=function(e,t,r){var s=this,i=n.DefaultHostValues,o=n.DefaultOptions;this.port=e||i.port,this.host=t||i.host,this.timeout=r&&r.timeout||o.timeout,this.socket=a.createSocket("udp4"),this.responded=!1,this.header=n.DefaultFinsHeader,this.socket.on("message",(function(e,t){s.responded=!0;var r=_processReply(e,t);s.emit("reply",r)})),this.socket.on("listening",(function(){s.emit("open")})),this.socket.on("close",(function(){s.emit("close")})),this.socket.on("error",(function(e){s.emit("error",e)})),this.timeout&&setTimeout((function(){0==s.responded&&s.emit("timeout",s.host)}),s.timeout)},o.prototype.read=function(e,t,r){var a=this;a.header.SID=_incrementSID(a.header.SID);var s=_buildHeader(a.header),i=(e=_translateMemoryAddress(e),t=_wordsToBytes(t),n.Commands.MEMORY_AREA_READ),o=_buildPacket([s,i,[e,t]]),l=new Buffer(o);this.socket.send(l,0,l.length,a.port,a.host,r)},o.prototype.write=function(e,t,r){var a=this;a.header.SID=_incrementSID(a.header.SID);var s=_buildHeader(a.header),i=(e=_translateMemoryAddress(e),_wordsToBytes(t.length||1)),o=n.Commands.MEMORY_AREA_WRITE,l=(t=_wordsToBytes(t),_buildPacket([s,o,[e,i,t]])),c=new Buffer(l);this.socket.send(c,0,c.length,a.port,a.host,r)},o.prototype.fill=function(e,t,r,a){var s=this;s.header.SID=_incrementSID(s.header.SID);var i=_buildHeader(s.header),o=(e=_translateMemoryAddress(e),r=_wordsToBytes(r),n.Commands.MEMORY_AREA_FILL),l=(t=_wordsToBytes(t),_buildPacket([i,o,[e,r,t]])),c=new Buffer(l);this.socket.send(c,0,c.length,s.port,s.host,a)},o.prototype.run=function(e){var t=this;t.header.SID=_incrementSID(t.header.SID);var r=_buildHeader(t.header),a=n.Commands.RUN,s=_buildPacket([r,a]),i=new Buffer(s);this.socket.send(i,0,i.length,t.port,t.host,e)},o.prototype.stop=function(e){var t=this;t.header.SID=_incrementSID(t.header.SID);var r=_buildHeader(t.header),a=n.Commands.STOP,s=_buildPacket([r,a]),i=new Buffer(s);this.socket.send(i,0,i.length,t.port,t.host,e)},o.prototype.status=function(e){var t=this;t.header.SID=_incrementSID(t.header.SID);var r=_buildHeader(t.header),a=n.Commands.CONTROLLER_STATUS_READ,s=_buildPacket([r,a]),i=new Buffer(s);this.socket.send(i,0,i.length,t.port,t.host,e)},o.prototype.close=function(){this.socket.close()}},7557:(e,t,r)=>{var a=r(9317);t.FinsClient=a},5547:(e,t,r)=>{const a=r(9896);var s=r(6277),i=r(456);e.exports={saveLogData:function(e){try{i.LocalDB.serialize((()=>{let t="";t+="_id text,",t+="currentTime datetime,",t+="parent text,",t+="idDevice text,",t+="typeObject text,",t+="tag text,",t+="previousValue text,",t+="newValue text,",t+="action text,",t+="nameObject text,",t+="user text,";let r=t.substring(0,t.length-1);i.LocalDB.run("CREATE TABLE IF NOT EXISTS LogData("+r+")",(t=>{if(t)response.json({result:"error",data:{},message:t});else{let t=`INSERT INTO LogData(_id,currentTime,parent,idDevice,typeObject,tag,previousValue,newValue,action,nameObject,user)VALUES(\n                    '${"a"+Math.random().toString(36)}',\n                    '${Date.now()}',\n                    '${e.parent?e.parent:"___"}',\n                    '${e.idDevice?e.idDevice:""}',\n                    '${e.typeObject?e.typeObject:""}',\n                    '${e.tag?e.tag:0}',\n                    '${e.previousValue?e.previousValue:""}',\n                    '${e.newValue?e.newValue:""}',\n                    '${e.action?e.action:""}',\n                    '${e.nameObject?e.nameObject:""}',\n                    '${e.user?e.user:""}'\n                    )`;i.LocalDB.run(t,(e=>{if(e)throw console.log(e),e;s.refreshLogData=!0}))}}))}))}catch(e){console.log(e)}},saveAlarmData:function(e){try{i.LocalDB.serialize((()=>{let t="";t+="_id text,",t+="currentTime datetime,",t+="parent text,",t+="idDevice text,",t+="typeAlarm text,",t+="tag text,",t+="alarmText text,",t+="alarmAtOn int,",t+="alarmAtOff int,",t+="typeSnackBar text,";let r=t.substring(0,t.length-1);i.LocalDB.run("CREATE TABLE IF NOT EXISTS LogAlarmData("+r+")",(t=>{if(t)response.json({result:"error",data:{},message:t});else{let t=`INSERT INTO LogAlarmData(_id,currentTime,parent,idDevice,typeAlarm,tag,alarmText,alarmAtOn,alarmAtOff,typeSnackBar)VALUES(\n                    '${"a"+Math.random().toString(36)}',\n                    '${Date.now()}',\n                    '${e.parent?e.parent:"___"}',\n                    '${e.idDevice?e.idDevice:""}',\n                    '${e.typeAlarm?e.typeAlarm:""}',\n                    '${e.tag?e.tag:0}',\n                    '${e.alarmText?e.alarmText:""}',\n                    '${e.alarmAtOn?e.alarmAtOn:""}',\n                    '${e.alarmAtOff?e.alarmAtOff:""}',\n                    '${e.typeSnackBar?e.typeSnackBar:""}'\n                    )`;i.LocalDB.run(t,(e=>{if(e)throw console.log(e),e}))}}))}))}catch(e){console.log(e)}},setLogServer:function(e){console.log(e),s.logServer.push(e+"\n"),s.logServer.length>100&&s.logServer.shift()},ReadWordOfPlcToByte:function(e,t,r){for(var a=[],s=e;s<e+t;s++){var i=255&r[s];a[2*(s-e)]=i,r[s]=(r[s]-i)/256,a[2*(s-e)+1]=r[s]}return a},StringToAscii:function(e){for(var t=new Array(e.length),r=0;r<e.length;r++)t[r]=e.charCodeAt(r);var a=[],s=0,i=0;for(r=0;r<t.length;r++)r%2==0&&(i=t[r],r+1===t.length&&(a[s]=i)),r%2==1&&(i+=256*t[r],a[s]=i,s+=1);return a},ReadBitOfPLC:function(e,t,r){for(var a=[],s=e;s<e+t;s++)for(var i=Number(r[s]),n=0;n<16;n++)a[16*(s-e)+n]=1&i,i>>=1;return a},ReadBitOfPLCSiemens:function(e,t,r){for(var a=[],s=e;s<e+t;s++)for(var i=Number(r[s]),n=0;n<16;n++)n<8&&(a[16*(s-e)+n+8]=1&i,i>>=1),n>=8&&(a[16*(s-e)+n-8]=1&i,i>>=1);return a},ReadWordOfPLC:function(e,t,r){var a=[];if(Array.isArray(r))for(var s=e;s<e+t;s++)r[s]>=0?a[s-e]=r[s]:a[s-e]=65536+r[s];return a},ReadDWordOfPLCSiemens:function(e,t,r){for(var a=[],s=e;s<e+2*t;s++)s%2==1&&(r[s]<0&&(r[s]=r[s]+65536),r[s-1]<0&&(r[s-1]=r[s-1]+65536),a[(s-e-1)/2]=r[s]+65536*r[s-1],a[(s-e-1)/2]<0&&(a[(s-e-1)/2]=a[(s-e-1)/2]+65536));return a},ReadDWordOfPLC:function(e,t,r){for(var a=[],s=e;s<e+2*t;s++)(s-e)%2==1&&(r[s]<0&&(r[s]=r[s]+65536),r[s-1]<0&&(r[s-1]=r[s-1]+65536),a[(s-e-1)/2]=65536*r[s]+r[s-1],a[(s-e-1)/2]<0&&(a[(s-e-1)/2]=a[(s-e-1)/2]+65536));return a},ConvertArray2Text:function(e){for(var t="",r=0;r<e.length;r++)t=t+"|"+e[r];return t},CheckChangeValue:function(e,t){var r,a=!1;if(!(void 0===(r=e)||null==r||r.length<=0))for(var s=0;s<e.length;s++)e[s]!=t[s]&&(a=!0);return a},CheckNegativeNumber:function(e){return e<0?e+65536:e>32767?e-65536:e},getRandomInt:function(e){return Math.floor(Math.random()*Math.floor(e))},saveJsonFile:function(e,t){try{a.existsSync(e)||a.writeFile(e,JSON.stringify(t),"utf8",(function(e){if(e)return console.log("An error occured while writing JSON Object to File."),console.log(e);console.log("JSON file has been saved.")}))}catch(e){console.error(e)}},getJsonFile:function(e,t){try{a.existsSync(e)?a.readFile(e,"utf8",(function(e,r){e&&console.log(e),obj=JSON.parse(r),t(obj)})):t("update")}catch(e){console.error(e),t([])}},saveFeedbackFile:function(e,t){try{a.writeFile(e,t,"utf8",(function(e){if(e)return console.log("An error occured while writing JSON Object to File."),console.log(e);console.log("JSON file has been saved.")}))}catch(e){console.error(e)}},convertPosCobot:function(e,t){var r=[];return r[0]=parseInt(t%256),r[1]=parseInt(t/256),r[2]=parseInt(e%256),r[3]=parseInt(e/256),Buffer.from([r[3],r[2],r[1],r[0]]).readFloatBE(0)},getIndexCobotWriteMB:function(e,t){return t%10<=e?t/10:t/10+1},ReadStringOfPLC:function(e,t){for(var r=[],a=0;a<t.length/e;a++){let i=[];for(var s=0;s<e;s++)i.push(255&t[a*e+s]),i.push(parseInt(t[a*e+s]/256));r[a]=String.fromCharCode(...i).toString().replace(/[^ -~]+/g,""),0===r[a].length&&(r[a]="_")}return r},ReadStringOfPLCModbus:function(e,t,r,a){for(var s=[],i=e;i<e+t;i++)a[i]>=0?s[i-e]=a[i]:s[i-e]=65536+a[i];for(var n=[],o=0;o<s.length/r;o++){let e=[];for(var l=0;l<r;l++)o*r+l<s.length&&(e.push(255&s[o*r+l]),e.push(parseInt(a[o*r+l]/256)));n[o]=String.fromCharCode(...e).toString().replace(/[^ -~]+/g,""),0==n[o].length&&(n[o]="___")}return n},getDateTime:function(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1;r=(r<10?"0":"")+r;var a=e.getUTCDate();a=(a<10?"0":"")+a;var s=e.getHours();s=(s<10?"0":"")+s;var i=e.getMinutes();i=(i<10?"0":"")+i;var n=e.getSeconds();return t+"/"+r+"/"+a+" "+s+":"+i+":"+(n<10?"0":"")+n},saveLog:function(e,t){var r="log/"+e+".log",s="["+this.getDateTime()+"] "+t.replace(/[^ -~]+/g,"")+"\r\n";try{a.existsSync(r)||(console.log(r),a.writeFile(r,"Data:\r\n",(function(e){e&&console.log("An error occured while writing JSON Object to File.")}))),a.appendFile(r,s,(function(e){if(e)return console.log(e);console.log('successfully appended "'+s+'"')}))}catch(e){console.error(e)}},getDate:function(){var e=new Date,t=e.getFullYear(),r=e.getMonth()+1;r=(r<10?"0":"")+r;var a=e.getUTCDate();return t+"_"+r+"_"+(a<10?"0":"")+a},ReadReal2OfPLC:function(e,t,r){var a=[];if(t)for(var s=e;s<e+2*t;s++)if((s-e)%2==1){let t=new ArrayBuffer(4),n=new Uint16Array(t);n[0]=r[s-1],n[1]=r[s];var i=new Float32Array(t);a[(s-e-1)/2]=i[0]}return a},ReadStringOfPLC_NodeRed:function(e,t,r,a){var s=[];if(e+t<=a.length)for(var i=e;i<e+t/r;i++){let t=[];for(var n=0;n<r;n++)t.push(255&a[e+(i-e)*r+n]),t.push(parseInt(a[e+(i-e)*r+n]/256));s[i-e]=String.fromCharCode(...t).toString().replace(/[^ -~]+/g,""),0===s[i-e].length&&(s[i-e]="_")}return s},ProcessSocketIO_Fins:function(e){if("BitAdjustForce"===e.NameCommand&&!isNaN(e.tag)&&!isNaN(e.idDevice)&&"Fins-Omron"===e.typeDevice&&parseInt(e.idDevice))if(parseInt(i.PLC_WriteUnSafe[parseInt(e.idDevice)])){if(parseInt(e.tag)/16<=parseInt(i.PLC_LengthOfWordBitAdjust[parseInt(e.idDevice)])){i.TimeDelayWriteWordBitAdjust[parseInt(e.idDevice)]||(s.OldWordBitAdjust[parseInt(e.idDevice)]=s.WordBitAdjust[parseInt(e.idDevice)].slice());let t=1<<parseInt(e.tag)%16,r=parseInt(i.PLC_WordStartBitAdjust[parseInt(e.idDevice)])+parseInt(e.tag)/16,a=s.OldWordBitAdjust[e.idDevice][parseInt(parseInt(e.tag)/16)];a^=t,i.TimeDelayWriteWordBitAdjust[parseInt(e.idDevice)]=10,s.OldWordBitAdjust[parseInt(e.idDevice)][parseInt(parseInt(e.tag)/16)]=a,console.log("Write Bit To PLC"),i.COMMUNICATION_PLC_OMRON[parseInt(e.idDevice)].write("D"+r,[a])}}else parseInt(e.enableLogData)&&SubFunction.saveLogData({parent:"logData",idDevice:e.idDevice,typeObject:"BitAdjust",tag:e.tag,previousValue:"old",newValue:"new",action:"Toggle",nameObject:"",user:e.currentUser}),i.COMMUNICATION_PLC_OMRON[parseInt(e.idDevice)].write("D1000",[110,110,e.mode,e.mode,e.tag,e.tag]);if("WordAdjustForce"!==e.NameCommand||isNaN(e.tag)||"Fins-Omron"!==e.typeDevice||parseInt(e.idDevice)&&(i.PLC_WriteUnSafe[parseInt(e.idDevice)]?parseInt(e.tag)<=i.PLC_LengthOfWordWordAdjust[parseInt(e.idDevice)]&&i.COMMUNICATION_PLC_OMRON[parseInt(e.idDevice)].write("D"+(parseInt(i.PLC_WordStartWordAdjust[parseInt(e.idDevice)])+parseInt(e.tag)),[e.value]):i.COMMUNICATION_PLC_OMRON[parseInt(e.idDevice)].write("D1000",[111,111,e.tag,e.tag,e.value,e.value])),"DWordAdjustForce"===e.NameCommand&&!isNaN(e.tag)&&"Fins-Omron"===e.typeDevice&&parseInt(e.idDevice)){var t=parseInt(e.value/65536),r=parseInt(e.value%65536);i.COMMUNICATION_PLC_OMRON[parseInt(e.idDevice)].write("D1000",[112,112,e.tag,e.tag,t,t,r,r])}if("TextFieldInput"===e.NameCommand&&!isNaN(e.tag)&&"Fins-Omron"===e.typeDevice){var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=e.value,o=new Buffer(n,"utf8");for(let e=0;e<o.length;e++)e<40&&(a[e]=o[e]);let t=[113,113,e.tag,e.tag,0,0,0,0,0,0,0].concat(a);"0"==e.idDevice?s.TextFieldInput[0][parseInt(e.tag)]=t:parseInt(e.idDevice)&&i.COMMUNICATION_PLC_OMRON[parseInt(e.idDevice)].write("D1000",t)}},ProcessSocketIO_Modbus:function(e){if("ElementWord_Force_RUN"===e.NameCommand&&!isNaN(e.indexElement)&&"Modbus-Client"===e.typeDevice&&parseInt(e.idDevice)&&i.PLC_WriteUnSafe[parseInt(e.idDevice)]&&parseInt(e.indexElement)<=i.PLC_LengthOfWordElement[parseInt(e.idDevice)]){let t=i.PLC_WordStartElement[parseInt(e.idDevice)]+parseInt(e.indexElement),r=s.Element[parseInt(e.idDevice)][parseInt(e.indexElement)];r|=16,r&=-9,s.clientMB.writeSingleRegister(parseInt(t),r).then((function(e){}),console.error)}if("ElementWord_Force_STOP"===e.NameCommand&&!isNaN(e.indexElement)&&"Modbus-Client"===e.typeDevice&&parseInt(e.idDevice)&&i.PLC_WriteUnSafe[parseInt(e.idDevice)]&&parseInt(e.indexElement)<=i.PLC_LengthOfWordElement[parseInt(e.idDevice)]){let t=i.PLC_WordStartElement[parseInt(e.idDevice)]+parseInt(e.indexElement),r=s.Element[parseInt(e.idDevice)][parseInt(e.indexElement)];r|=8,r&=-17,s.clientMB.writeSingleRegister(parseInt(t),r).then((function(e){}),console.error)}if("ElementWord_RUN"===e.NameCommand&&!isNaN(e.indexElement)&&"Modbus-Client"===e.typeDevice&&parseInt(e.idDevice)&&i.PLC_WriteUnSafe[parseInt(e.idDevice)]&&parseInt(e.indexElement)<=i.PLC_LengthOfWordElement[parseInt(e.idDevice)]){let t=i.PLC_WordStartElement[parseInt(e.idDevice)]+parseInt(e.indexElement),r=s.Element[parseInt(e.idDevice)][parseInt(e.indexElement)];r|=1,s.clientMB.writeSingleRegister(parseInt(t),r).then((function(e){}),console.error)}if("ElementWord_STOP"===e.NameCommand&&!isNaN(e.indexElement)&&"Modbus-Client"===e.typeDevice&&parseInt(e.idDevice)&&i.PLC_WriteUnSafe[parseInt(e.idDevice)]&&parseInt(e.indexElement)<=i.PLC_LengthOfWordElement[parseInt(e.idDevice)]){let t=i.PLC_WordStartElement[parseInt(e.idDevice)]+parseInt(e.indexElement),r=s.Element[parseInt(e.idDevice)][parseInt(e.indexElement)];r&=-2,s.clientMB.writeSingleRegister(parseInt(t),r).then((function(e){}),console.error)}if("ElementWord_AUTO"===e.NameCommand&&!isNaN(e.indexElement)&&"Modbus-Client"===e.typeDevice&&parseInt(e.idDevice)&&i.PLC_WriteUnSafe[parseInt(e.idDevice)]&&parseInt(e.indexElement)<=i.PLC_LengthOfWordElement[parseInt(e.idDevice)]){let t=i.PLC_WordStartElement[parseInt(e.idDevice)]+parseInt(e.indexElement),r=s.Element[parseInt(e.idDevice)][parseInt(e.indexElement)];r&=-9,r&=-17,s.clientMB.writeSingleRegister(parseInt(t),r).then((function(e){}),console.error)}if("BitAdjustForce"===e.NameCommand&&!isNaN(e.tag)&&"Modbus-Client"===e.typeDevice)if("system"==e.idDevice)s.BitAdjust[0][parseInt(e.tag)]=!s.BitAdjust[0][parseInt(e.tag)],s.BitDisplay[0][parseInt(e.tag)]=s.BitAdjust[0][parseInt(e.tag)];else if(parseInt(e.idDevice)&&i.PLC_WriteUnSafe[parseInt(e.idDevice)]){if(2==e.mode&&parseInt(e.tag)/16<=parseInt(i.PLC_LengthOfWordBitAdjust[parseInt(e.idDevice)])){i.TimeDelayWriteWordBitAdjust[parseInt(e.idDevice)]||(s.OldWordBitAdjust[parseInt(e.idDevice)]=s.WordBitAdjust[parseInt(e.idDevice)].slice());let t=1<<parseInt(e.tag)%16,r=parseInt(i.PLC_WordStartBitAdjust[parseInt(e.idDevice)])+parseInt(parseInt(e.tag)/16),a=s.OldWordBitAdjust[parseInt(e.idDevice)][parseInt(parseInt(e.tag)/16)];a^=t,i.TimeDelayWriteWordBitAdjust[parseInt(e.idDevice)]=10,s.OldWordBitAdjust[parseInt(e.idDevice)][parseInt(parseInt(e.tag)/16)]=a,i.COMMUNICATION_PLC_MODBUS[parseInt(e.idDevice)].writeSingleRegister(parseInt(r),a).then((function(e){}),console.error)}if(1==e.mode&&parseInt(e.tag)/16<=i.PLC_LengthOfWordBitAdjust[parseInt(e.idDevice)]){let t=1<<parseInt(e.tag)%16,r=i.PLC_WordStartBitAdjust[parseInt(e.idDevice)]+parseInt(e.tag)/16,a=s.WordBitAdjust[parseInt(e.idDevice)][parseInt(parseInt(e.tag)/16)];a|=t,i.TimeDelayWriteWordBitAdjust[parseInt(e.idDevice)]=10,i.COMMUNICATION_PLC_MODBUS[e.idDevice].writeSingleRegister(parseInt(r),a).then((function(e){}),console.error)}if(0==e.mode&&parseInt(e.tag)/16<=i.PLC_LengthOfWordBitAdjust[parseInt(e.idDevice)]){let t=1<<parseInt(e.tag)%16;console.log(t);let r=i.PLC_WordStartBitAdjust[parseInt(e.idDevice)]+parseInt(e.tag)/16,a=s.WordBitAdjust[parseInt(e.idDevice)][parseInt(parseInt(e.tag)/16)];a&=~t,i.TimeDelayWriteWordBitAdjust[parseInt(e.idDevice)]=10,i.COMMUNICATION_PLC_MODBUS[e.idDevice].writeSingleRegister(parseInt(r),a).then((function(e){}),console.error)}}if("WordAdjustForce"===e.NameCommand&&!isNaN(e.tag)&&"Modbus-Client"===e.typeDevice)if("system"==e.idDevice)s.WordAdjust[0][parseInt(e.tag)]=e.value;else if(i.PLC_WriteUnSafe[parseInt(e.idDevice)]&&parseInt(e.tag)<=parseInt(i.PLC_LengthOfWordWordAdjust[parseInt(e.idDevice)])){let t;parseInt(e.value)>=0&&parseInt(e.value)<65536?(t=parseInt(e.value),i.COMMUNICATION_PLC_MODBUS[e.idDevice].writeSingleRegister(parseInt(i.PLC_WordStartWordAdjust[parseInt(e.idDevice)])+parseInt(e.tag),t).then((function(e){}),console.error)):parseInt(e.value)<0&&parseInt(e.value)>-32767&&(t=parseInt(e.value)+65536,i.COMMUNICATION_PLC_MODBUS[e.idDevice].writeSingleRegister(parseInt(i.PLC_WordStartWordAdjust[parseInt(e.idDevice)])+parseInt(e.tag),t).then((function(e){}),console.error)),console.log(parseInt(e.value))}if("DWordAdjustForce"===e.NameCommand&&!isNaN(e.tag)&&"Modbus-Client"===e.typeDevice){var t=parseInt(e.value/65536),r=parseInt(e.value%65536);i.COMMUNICATION_PLC_MODBUS[e.idDevice].writeMultipleRegisters(parseInt(i.PLC_WordStartDWordAdjust[parseInt(e.idDevice)])+2*parseInt(e.tag),[r,t]).then((function(e){console.log(e)}),console.error)}if("TextFieldInput"===e.NameCommand&&!isNaN(e.tag)&&"Modbus-Client"===e.typeDevice){var a=new Array(i.PLC_NumberWordInString[parseInt(e.idDevice)]).fill(0),n=e.value,o=new Buffer(n,"utf8");for(let t=0;t<o.length;t++)t<2*i.PLC_NumberWordInString[parseInt(e.idDevice)]&&(a[t]=o[t]);i.COMMUNICATION_PLC_MODBUS[e.idDevice].writeMultipleRegisters(parseInt(i.PLC_WordStartString[parseInt(e.idDevice)])+parseInt(e.tag)*parseInt(i.PLC_NumberWordInString[parseInt(e.idDevice)]),a).then((function(e){console.log(e)}),console.error)}},ProcessSocketIO_Modbus_Server:function(e){if("BitAdjustForce"!==e.NameCommand||isNaN(e.tag)||"Modbus-Server"!==e.typeDevice||parseInt(e.idDevice)&&(s.StoreModbusServerReg[parseInt(e.idDevice)][i.PLC_WordStartComPC[parseInt(e.idDevice)]]=i.PLC_Code_BitAdjust[parseInt(e.idDevice)],s.StoreModbusServerReg[parseInt(e.idDevice)][i.PLC_WordStartComPC[parseInt(e.idDevice)]+1]=parseInt(e.tag),s.StoreModbusServerReg[parseInt(e.idDevice)][i.PLC_WordStartComPC[parseInt(e.idDevice)]+2]=parseInt(e.value)),"WordAdjustForce"!==e.NameCommand||isNaN(e.tag)||"Modbus-Server"!==e.typeDevice||(parseInt(e.value)>=0&&parseInt(e.value)<65536?(s.StoreModbusServerReg[parseInt(e.idDevice)][i.PLC_WordStartComPC[parseInt(e.idDevice)]]=i.PLC_Code_WordAdjust[parseInt(e.idDevice)],s.StoreModbusServerReg[parseInt(e.idDevice)][i.PLC_WordStartComPC[parseInt(e.idDevice)]+1]=parseInt(e.tag),s.StoreModbusServerReg[parseInt(e.idDevice)][i.PLC_WordStartComPC[parseInt(e.idDevice)]+2]=parseInt(e.value)):parseInt(e.value)<0&&parseInt(e.value)>-32767&&(s.StoreModbusServerReg[parseInt(e.idDevice)][i.PLC_WordStartComPC[parseInt(e.idDevice)]]=i.PLC_Code_WordAdjust[parseInt(e.idDevice)],s.StoreModbusServerReg[parseInt(e.idDevice)][i.PLC_WordStartComPC[parseInt(e.idDevice)]+1]=parseInt(e.tag),s.StoreModbusServerReg[parseInt(e.idDevice)][i.PLC_WordStartComPC[parseInt(e.idDevice)]+2]=parseInt(e.value)+65536)),"DWordAdjustForce"===e.NameCommand&&!isNaN(e.tag)&&"Modbus-Server"===e.typeDevice){var t=parseInt(e.value/65536),r=parseInt(e.value%65536);s.StoreModbusServerReg[parseInt(e.idDevice)][i.PLC_WordStartComPC[parseInt(e.idDevice)]]=i.PLC_Code_DWordAdjust[parseInt(e.idDevice)],s.StoreModbusServerReg[parseInt(e.idDevice)][i.PLC_WordStartComPC[parseInt(e.idDevice)]+1]=parseInt(e.tag),s.StoreModbusServerReg[parseInt(e.idDevice)][i.PLC_WordStartComPC[parseInt(e.idDevice)]+2]=t,s.StoreModbusServerReg[parseInt(e.idDevice)][i.PLC_WordStartComPC[parseInt(e.idDevice)]+3]=r}},ProcessSocketIO_Profinet:function(e){if("BitAdjustForce"===e.NameCommand&&!isNaN(e.tag)&&"ProfiNet"===e.typeDevice&&parseInt(e.idDevice))if(i.PLC_WriteUnSafe[parseInt(e.idDevice)]){if(parseInt(e.tag)/16<=parseInt(i.PLC_LengthOfWordBitAdjust[parseInt(e.idDevice)])){i.TimeDelayWriteWordBitAdjust[parseInt(e.idDevice)]||(s.OldWordBitAdjust[parseInt(e.idDevice)]=s.WordBitAdjust[parseInt(e.idDevice)].slice());let t=1<<parseInt(e.tag)%16,r=parseInt(i.PLC_WordStartBitAdjust[parseInt(e.idDevice)])+parseInt(e.tag)/16,a=s.OldWordBitAdjust[e.idDevice][parseInt(parseInt(e.tag)/16)];a^=t,i.TimeDelayWriteWordBitAdjust[parseInt(e.idDevice)]=10,s.OldWordBitAdjust[parseInt(e.idDevice)][parseInt(parseInt(e.tag)/16)]=a,i.COMMUNICATION_PLC_SIEMENS[parseInt(e.idDevice)].writeItems("DB1,INT"+r,[a])}}else parseInt(e.enableLogData)&&SubFunction.saveLogData({parent:"logData",idDevice:e.idDevice,typeObject:"BitAdjust",tag:e.tag,previousValue:"old",newValue:"new",action:"Toggle",nameObject:"",user:e.currentUser}),i.COMMUNICATION_PLC_SIEMENS[parseInt(e.idDevice)].writeItems("ComPC",[110,110,e.mode,e.mode,e.tag,e.tag],(()=>{console.log("can not write data Siemens")}));"WordAdjustForce"!==e.NameCommand||isNaN(e.tag)||"ProfiNet"!==e.typeDevice||(i.PLC_WriteUnSafe[parseInt(e.idDevice)]?parseInt(e.tag)<=i.PLC_LengthOfWordWordAdjust[parseInt(e.idDevice)]&&i.COMMUNICATION_PLC_SIEMENS[parseInt(e.idDevice)].writeItems("DB1,INT"+(parseInt(i.PLC_WordStartWordAdjust[parseInt(e.idDevice)])+parseInt(e.tag)),[e.value]):i.COMMUNICATION_PLC_SIEMENS[parseInt(e.idDevice)].writeItems("ComPC",[111,111,e.tag,e.tag,e.value,e.value],(()=>{console.log("can not write data Siemens")})))},ProcessSocketIO_System:function(e){if("BitAdjustForce"!==e.NameCommand||isNaN(e.tag)||isNaN(e.idDevice)||"System"!==e.typeDevice||(2==e.mode&&(s.BitAdjust[parseInt(e.idDevice)][parseInt(e.tag)]=!s.BitAdjust[parseInt(e.idDevice)][parseInt(e.tag)],s.BitDisplay[parseInt(e.idDevice)][parseInt(e.tag)]=s.BitAdjust[parseInt(e.idDevice)][parseInt(e.tag)]),0==e.mode&&(s.BitAdjust[parseInt(e.idDevice)][parseInt(e.tag)]=0,s.BitDisplay[parseInt(e.idDevice)][parseInt(e.tag)]=0),1==e.mode&&(s.BitAdjust[parseInt(e.idDevice)][parseInt(e.tag)]=1,s.BitDisplay[parseInt(e.idDevice)][parseInt(e.tag)]=1)),"WordAdjustForce"!==e.NameCommand||isNaN(e.tag)||"System"!==e.typeDevice||(s.WordAdjust[parseInt(e.idDevice)][parseInt(e.tag)]=e.value,s.WordDisplay[parseInt(e.idDevice)][parseInt(e.tag)]=e.value),"DWordAdjustForce"!==e.NameCommand||isNaN(e.tag)||"System"!==e.typeDevice||(s.DWordAdjust[parseInt(e.idDevice)][parseInt(e.tag)]=e.value,s.DWordDisplay[parseInt(e.idDevice)][parseInt(e.tag)]=e.value),"TextFieldInput"===e.NameCommand&&!isNaN(e.tag)&&"System"===e.typeDevice){var t=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=e.value,a=new Buffer(r,"utf8");for(let e=0;e<a.length;e++)e<40&&(t[e]=a[e]);let i=[113,113,e.tag,e.tag,0,0,0,0,0,0,0].concat(t);"0"==e.idDevice&&(s.TextFieldInput[parseInt(e.idDevice)][parseInt(e.tag)]=i)}}}},6277:e=>{e.exports={turnOff:0,logs:[],logServer:[],oldLogServer:[],refreshLogData:!0,Plc_Connect_Status:[0,0,0,0,0,0,0,0,0,0,0,0],Timer_Check_Connect_Status:[3,3,3,3,3,3,3,3,3,3,3,3],namePallet:"",currentUser:"",ValueCommunicationPLC:[],ListUserPass:[],WritePosCobot:[],resultImage:[],refreshDataSubScreenImageLibrary:!0,refreshDataBitDisplayImageLibrary:!0,refreshDataBitAdjustImageLibrary:!0,resultBitDisplayImageLibrary:[],resultBitAdjustImageLibrary:[],refreshDataMapImageLibrary:!0,resultSubScreenImageLibrary:[],resultMapImageLibrary:[],refreshDataElementImageLibrary:!0,resultElementImageLibrary:[],refreshDataElement:!0,refreshDataElementWord:!0,refreshDataBitAdjust:!0,refreshDataBitDisplay:!0,refreshDataMap:!0,refreshDataWordAdjust:!0,refreshDataWordDisplay:!0,refreshDataDWordAdjust:!0,refreshDataDWordDisplay:!0,refreshDataImage:!0,refreshDataLabel:!0,refreshDataString:!0,refreshDataLine:!0,refreshDataPoint:!0,refreshDataPointPickPlace:!0,refreshDataPanel:!0,refreshDataChart:!0,refreshDataProjectCall:!0,refreshDataPalletizer:!0,refreshDataPalletizerProduct:!0,refreshDataTextField:!0,refreshDataTextFieldInput:!0,refreshDataGroupControl:!0,refreshDataRealDisplay:!0,refreshDataJoystick:!0,haveChangeElement:!1,haveChangeBitAdjust:!1,haveChangeBitDisplay:!1,haveChangeMap:!1,haveChangeWordAdjust:!1,haveChangeWordDisplay:!1,haveChangeDWordAdjust:!1,haveChangeDWordDisplay:!1,haveChangeTextField:!1,haveChangeTextFieldInput:!1,haveChangeRealDisplay:!1,haveChangeJoystick:!0,StoreModbusServerReg:[[],[],[],[],[],[],[],[],[],[]],StoreModbusServerBit:[[],[],[],[],[],[],[],[],[],[]],refreshDataPercent:!0,resultPercent:[],Percent:[],OldPercent:[],haveChangePercent:!1,Element:[[],[],[],[],[],[],[],[],[],[]],OldElement:[[],[],[],[],[],[],[],[],[],[]],Map:[],BitDisplay:[[],[],[],[],[],[],[],[],[],[]],BitAdjust:[[],[],[],[],[],[],[],[],[],[]],WordDisplay:[[1,2,3],[],[],[],[],[],[],[],[],[]],WordAdjust:[[],[],[],[],[],[],[],[],[],[]],DWordDisplay:[[],[],[],[],[],[],[],[],[],[]],DWordAdjust:[[],[],[],[],[],[],[],[],[],[]],OldBitDisplay:[[],[],[],[],[],[],[],[],[],[]],OldBitAdjust:[[],[],[],[],[],[],[],[],[],[]],OldWordDisplay:[[],[],[],[],[],[],[],[],[],[]],OldWordAdjust:[[],[],[],[],[],[],[],[],[],[]],OldDWordDisplay:[[],[],[],[],[],[],[],[],[],[]],OldDWordAdjust:[[],[],[],[],[],[],[],[],[],[]],TextField:[[],[],[],[],[],[],[],[],[],[]],OldTextField:[[],[],[],[],[],[],[],[],[],[]],TextFieldInput:[[],[],[],[],[],[],[],[],[],[]],OldTextFieldInput:[[],[],[],[],[],[],[],[],[],[]],WordBitAdjust:[],OldWordBitAdjust:[],RealDisplay:[[],[],[],[],[],[],[],[],[],[]],OldRealDisplay:[[],[],[],[],[],[],[],[],[],[]],IndexSocketInputSignal:2,IndexSocketBitAdjust:4,IndexSocketBitDisplay:3,IndexSocketWordDisplay:5,IndexSocketWordAdjust:6,IndexSocketDWordDisplay:7,IndexSocketDWordAdjust:8,CheckBitDisplay:"",CheckBitAdjust:"",CheckWordDisplay:"",CheckWordAdjust:"",CheckDWordDisplay:"",CheckDWordAdjust:"",resultlabel:[],resultline:[],resultElement:[],resultElementWord:[],resultBitDisplay:[],resultBitAdjust:[],resultWordDisplay:[],resultWordAdjust:[],resultDWordDisplay:[],resultDWordAdjust:[],resultPanel:[],resultChart:[],resultProjectCall:[],resultPalletizer:[],resultPalletizerProduct:[],resultTextField:[],resultTextFieldInput:[],resultRealDisplay:[],resultcustomeroperator:void 0,refreshdata:void 0,CustomerOperator:void 0,resultFlow:[],resultJoystick:[],refreshDataPosCobot:!0,resultPosCobot:[],resultGroupControl:[],ListString:[[],[],[],[],[],[],[],[],[],[]],OldListString:[[],[],[],[],[],[],[],[],[],[]],haveChangeString:!1,ResultString:[],storeListString:[],refreshData3D:!0,refreshDataProduct:!0,resultProduct:[],refreshDataUser:!0,resultUser:[],LoadProductsToPLC:!1,refreshDataGoal:!0,resultGoal:[],refreshDataSampleRoute:!0,resultSampleRoute:[],refreshDataFormularProject:!0,resultFormularProject:[],resultFormularProjectConvertType:[],xlData:void 0,xlData2:void 0,refreshDataScaleProject:!0,resultScaleProject:[],refreshDataSearchBox:!0,resultSearchBox:[],refreshDataSearchBoxList:!0,resultSearchBoxList:[],refreshDataReportScaleProject:!0,resultReportScaleProject:[],refreshDataReportScaleProjectTonKho:!0,resultReportScaleProjectTonKho:[],refreshDataProjectNanoenvi:!0,resultProjectNanoenvi:[],resultProjectNanoenvi1:[],resultProjectNanoenvi2:[],resultProjectNanoenvi3:[],resultProjectNanoenvi4:[],refreshDataProjectStampingMachine:!0,resultStampingMachineStartTime:[],ValueRotate:[],OldValueRotate:[],haveChangeValueRotate:!1,StoreBoxPalletizer:[],StoragePallet:[],refreshStoragePallet:!0,StoragePallet2:[],refreshStoragePallet2:!0,StoragePalletManual:[],refreshStoragePalletManual:!0,refreshScreen_Label:!0,resultProjectScreen_Label:[],refreshScreen_Panel:!0,resultProjectScreen_Panel:[],refreshScreen_Element:!0,resultProjectScreen_Element:[],refreshScreen_BitDisplay:!0,resultProjectScreen_BitDisplay:[],refreshScreen_BitAdjust:!0,resultProjectScreen_BitAdjust:[],refreshScreen_WordDisplay:!0,resultProjectScreen_WordDisplay:[],refreshScreen_WordAdjust:!0,resultProjectScreen_WordAdjust:[],refreshScreen_DWordDisplay:!0,resultProjectScreen_DWordDisplay:[],refreshScreen_DWordAdjust:!0,resultProjectScreen_DWordAdjust:[],refreshScreen_String:!0,resultProjectScreen_String:[],refreshScreen_TextFieldInput:!0,resultProjectScreen_TextFieldInput:[],refreshScreen_Line:!0,resultProjectScreen_Line:[],refreshSetupElement:!0,resultSetupElement:[],refreshDataSetupAlarm:!0,resultSetupAlarm:[],resultSetupAlarmTable:[],resultSetupAlarmTable_BitDisplay:[],resultSetupAlarmTable_BitAdjust:[],haveChangeArrBitAdjust:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],haveChangeArrBitAdjust_SetupAlarm:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],haveChangeArrBitDisplay:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],haveChangeArrBitDisplay_SetupAlarm:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],haveChangeArrWordAdjust:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],haveChangeArrWordDisplay:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],haveChangeArrDWordAdjust:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],haveChangeArrDWordDisplay:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],haveChangeArrElement:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],haveChangeArrString:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],haveChangeArrTextField:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],haveChangeArrTextFieldInput:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],haveChangeArrRealDisplay:[!0,!0,!0,!0,!0,!0,!0,!0,!0,!0],clientMB:void 0,clientMB_Writting:!1,ComPC:[],refreshMemonic:!0,haveChangeMemonic:!1,resultMemonic:[],resultIconImageLibrary:[],refreshDataIconImageLibrary:!0,resultImageBackgroundImageLibrary:[],refreshDataImageBackgroundImageLibrary:!0,result3D:[]}},456:e=>{e.exports={PositionMobileRobot:[{},{},{},{},{}],OldPositionMobileRobot:[],active:!1,IO:void 0,PathLocalDB:void 0,LocalDB:null,PLC_Code_BitAdjust:[],PLC_Code_WordAdjust:[],PLC_Code_DWordAdjust:[],ProjectPalletizer:!1,COMMUNICATION_SERVER_TYPE:[],COMMUNICATION_PLC_OMRON:[],COMMUNICATION_MOBILE_ROBOT:[],COMMUNICATION_MOBILE_ROBOT_TIMER:[],COMMUNICATION_PLC_MODBUS:[],COMMUNICATION_PLC_SIEMENS:[],COMMUNICATION_VNC:[],COMMUNICATION_VNC_INITIAL_DATA:[],COMMUNICATION_SOCKET_CLIENT:[],TimeDelayWriteWordBitAdjust:[],PLC_WordStartElement:[],PLC_LengthOfWordElement:[],PLC_WordStartBitDisplay:[],PLC_LengthOfWordBitDisplay:[],PLC_WordStartBitAdjust:[],PLC_LengthOfWordBitAdjust:[],PLC_BitStartBitDisplay:[],PLC_LengthOfBitBitDisplay:[],PLC_BitStartBitAdjust:[],PLC_LengthOfBitBitAdjust:[],PLC_WordStartWordDisplay:[],PLC_LengthOfWordWordDisplay:[],PLC_WordStartWordAdjust:[],PLC_LengthOfWordWordAdjust:[],PLC_WordStartDWordDisplay:[],PLC_LengthOfWordDWordDisplay:[],PLC_WordStartDWordAdjust:[],PLC_LengthOfWordDWordAdjust:[],PLC_Length_ReadWrite:[],PLC_WriteUnSafe:[],PLC_IntervalWriteData:[],PLC_WordStartRotate:[],PLC_LengthOfWordRotate:[],PLC_WordStartComPC:[],PLC_LengthOfWordComPC:[],PLC_Enable_String:[],PLC_WordStartString:[],PLC_LengthOfWordString:[],PLC_NumberWordInString:[],RefreshData:!1}},6509:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.AppController=void 0;const i=r(3563),n=r(7247),o=r(4774),l=r(9940),c=r(9742),d=r(7888),u=r(8792),p=r(3336),y=r(9446),f=r(3044),g=r(5324),m=r(6052),h=r(6277),v=r(456),D=r(4780);let S=class{constructor(e,t,r,a,s,i,n,o,l,c,d){this.socketGateway=e,this.scadaWordDisplayRefreshService=t,this.scadaWordAdjustRefreshService=r,this.scadaDWordDisplayRefreshService=a,this.scadaElementRefreshService=s,this.scadaBitAdjustRefreshService=i,this.scadaBitDisplayRefreshService=n,this.scadaDWordAdjustRefreshService=o,this.scadaStringRefreshService=l,this.scadaTextFieldRefreshService=c,this.scadaSetupAlarmRefreshService=d,setInterval((()=>{if(h&&1==D.active){for(let e=0;e<h.Element.length;e++)JSON.stringify(h.Element[e])!==JSON.stringify(h.OldElement[e])&&(h.OldElement[e]=h.Element[e].slice(),h.haveChangeArrElement[e]=!0,this.scadaElementRefreshService.refreshData());for(let e=0;e<h.BitAdjust.length;e++)JSON.stringify(h.BitAdjust[e])!==JSON.stringify(h.OldBitAdjust[e])&&(h.OldBitAdjust[e]=h.BitAdjust[e].slice(),h.haveChangeArrBitAdjust[e]=!0,this.scadaBitAdjustRefreshService.refreshData(),h.haveChangeArrBitAdjust_SetupAlarm[e]=!0,this.scadaSetupAlarmRefreshService.refreshData());for(let e=0;e<h.BitDisplay.length;e++)JSON.stringify(h.BitDisplay[e])!==JSON.stringify(h.OldBitDisplay[e])&&(h.OldBitDisplay[e]=h.BitDisplay[e].slice(),h.haveChangeArrBitDisplay[e]=!0,this.scadaBitDisplayRefreshService.refreshData());for(let e=0;e<h.WordDisplay.length;e++)JSON.stringify(h.WordDisplay[e])!==JSON.stringify(h.OldWordDisplay[e])&&(h.OldWordDisplay[e]=h.WordDisplay[e].slice(),h.haveChangeArrWordDisplay[e]=!0,this.scadaWordDisplayRefreshService.refreshData());for(let e=0;e<h.WordAdjust.length;e++)JSON.stringify(h.WordAdjust[e])!==JSON.stringify(h.OldWordAdjust[e])&&(h.OldWordAdjust[e]=h.WordAdjust[e].slice(),h.haveChangeArrWordAdjust[e]=!0,this.scadaWordAdjustRefreshService.refreshData());for(let e=0;e<h.DWordDisplay.length;e++)JSON.stringify(h.DWordDisplay[e])!==JSON.stringify(h.OldDWordDisplay[e])&&(h.OldDWordDisplay[e]=h.DWordDisplay[e].slice(),h.haveChangeArrDWordDisplay[e]=!0,this.scadaDWordDisplayRefreshService.refreshData());for(let e=0;e<h.DWordAdjust.length;e++)JSON.stringify(h.DWordAdjust[e])!==JSON.stringify(h.OldDWordAdjust[e])&&(h.OldDWordAdjust[e]=h.DWordAdjust[e].slice(),h.haveChangeArrDWordAdjust[e]=!0,this.scadaDWordAdjustRefreshService.refreshData());for(let e=0;e<h.ListString.length;e++)JSON.stringify(h.ListString[e])!==JSON.stringify(h.OldListString[e])&&(h.OldListString[e]=h.ListString[e].slice(),h.haveChangeArrString[e]=!0,this.scadaStringRefreshService.refreshData());for(let e=0;e<h.RealDisplay.length;e++)JSON.stringify(h.RealDisplay[e])!==JSON.stringify(h.OldRealDisplay[e])&&(h.OldRealDisplay[e]=h.RealDisplay[e].slice(),h.haveChangeArrRealDisplay[e]=!0);for(let e=0;e<h.TextField.length;e++)JSON.stringify(h.TextField[e])!==JSON.stringify(h.OldTextField[e])&&(h.OldTextField[e]=h.TextField[e].slice(),h.haveChangeArrTextField[e]=!0,this.scadaTextFieldRefreshService.refreshData());JSON.stringify(v.PositionMobileRobot)!==JSON.stringify(v.OldPositionMobileRobot)&&(v.OldPositionMobileRobot=v.PositionMobileRobot.slice(),this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("PositionMobile",v.PositionMobileRobot))}}),100),setInterval((()=>{this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("PLC_Connect_Status",h.Plc_Connect_Status),1==h.turnOff&&process.exit(0)}),1e3)}};t.AppController=S,t.AppController=S=a([(0,i.Controller)(),s("design:paramtypes",[n.SocketGateway,o.ScadaWordDisplayRefreshService,g.ScadaWordAdjustRefreshService,u.ScadaDWordDisplayRefreshService,l.ScadaElementRefreshService,c.ScadaBitAdjustRefreshService,d.ScadaBitDisplayRefreshService,p.ScadaDWordAdjustRefreshService,y.ScadaStringRefreshService,f.ScadaTextFieldRefreshService,m.ScadaSetupAlarmRefreshService])],S)},3205:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.AppModule=void 0;const s=r(3563),i=r(6509),n=r(2283),o=r(5851),l=r(2449),c=r(2523),d=r(9522),u=r(1205),p=r(4831),y=r(3397),f=r(8271),g=r(7239),m=r(5893),h=r(6881),v=r(7305),D=r(5423),S=r(1937),j=r(2181),b=r(3115),_=r(1845),I=r(979),A=r(69),R=r(1129),P=r(677),O=r(4879),C=r(6285),B=r(1717),E=r(2589),W=r(6173),M=r(6461),w=r(4774),L=r(9940),k=r(9742),N=r(7888),x=r(8792),G=r(3336),F=r(9446),T=r(3044),U=r(8281),V=r(6959),q=r(1903),J=r(5822),$=r(5324),z=r(6052);let H=class{};t.AppModule=H,t.AppModule=H=a([(0,s.Module)({imports:[n.PostModule,o.NoteModule,l.SocketIoModule,c.SystemApiModule,q.ConfigModule,d.TypeOrmModule.forRootAsync(J.typeOrmConfigAsync),u.ScadaLabelModule,p.ScadaUserModule,y.ScadaPanelModule,f.Scada3DModule,g.ScadaBitAdjustModule,m.ScadaWordAdjustModule,h.ScadaDWordAdjustModule,v.ScadaBitDisplayModule,D.ScadaWordDisplayModule,S.ScadaDWordDisplayModule,j.ScadaBitDisplayImageLibraryModule,b.ScadaBitAdjustImageLibraryModule,I.ScadaIconImageLibraryModule,A.ScadaBackgroundImageLibraryModule,R.ScadaMapImageLibraryModule,P.ScadaMapModule,O.ScadaStringModule,C.ScadaTextFieldModule,B.ScadaLineModule,_.ScadaElementImageLibraryModule,E.ScadaElementModule,W.ScadaMemonicModule,l.SocketIoModule,U.MicroserviceClientModule,V.MqttModule,M.ScadaSetupAlarmModule],controllers:[i.AppController],providers:[w.ScadaWordDisplayRefreshService,$.ScadaWordAdjustRefreshService,L.ScadaElementRefreshService,k.ScadaBitAdjustRefreshService,N.ScadaBitDisplayRefreshService,x.ScadaDWordDisplayRefreshService,G.ScadaDWordAdjustRefreshService,F.ScadaStringRefreshService,T.ScadaTextFieldRefreshService,z.ScadaSetupAlarmRefreshService]})],H)},1903:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigModule=void 0;const s=r(3563),i=r(2664);let n=class{};t.ConfigModule=n,t.ConfigModule=n=a([(0,s.Module)({providers:[i.ConfigService],exports:[i.ConfigService]})],n)},2664:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigService=void 0;const i=r(3563),n=r(818),o=r(9896);let l=class{constructor(){{const e=__dirname+"/../.env";o.existsSync(e)||(console.log(".env file does not exist"),process.exit(0)),this.envConfig=n.parse(o.readFileSync(e))}}get(e){return this.envConfig[e]}};t.ConfigService=l,t.ConfigService=l=a([(0,i.Injectable)(),s("design:paramtypes",[])],l)},5822:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.typeOrmConfigAsync=void 0;const a=r(1903),s=r(2664),i=r(6334),n=r(2428),o=r(3048),l=r(7822),c=r(9314),d=r(602),u=r(938),p=r(8110),y=r(3350),f=r(6324),g=r(7470),m=r(1374),h=r(274),v=r(9310),D=r(8982),S=r(1902),j=r(4288),b=r(5392),_=r(9094),I=r(1520),A=r(5550),R=r(2e3),P=r(7222);t.typeOrmConfigAsync={imports:[a.ConfigModule],inject:[s.ConfigService],useFactory:async e=>({type:"sqlite",database:e.get("dbPath"),entities:[i.BackgroundImageLibraryEntity,I.UserEntity,o.BitAdjustEntity,n.BitAdjustImageLibraryEntity,c.BitDisplayEntity,l.BitDisplayImageLibraryEntity,d.DWordAdjustEntity,u.DWordDisplayEntity,y.ElementEntity,p.ElementImageLibraryEntity,f.IconImageLibraryEntity,g.LabelEntity,m.LineEntity,v.MapEntity,h.MapImageLibraryEntity,D.MemonicEntity,S.PanelEntity,j._3DEntity,b.StringEntity,_.TextFieldEntity,A.WordAdjustEntity,R.WordDisplayEntity,P.SetupAlarmEntity],synchronize:!0})}},3721:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.MicroserviceClientController=void 0;const i=r(3563),n=r(6202);let o=class{constructor(e){this.microserviceClientService=e}async sendMessage(){return await this.microserviceClientService.sendMessage("Hello from client!")}};t.MicroserviceClientController=o,a([(0,i.Get)(),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",Promise)],o.prototype,"sendMessage",null),t.MicroserviceClientController=o=a([(0,i.Controller)(),s("design:paramtypes",[n.MicroserviceClientService])],o)},8281:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.MicroserviceClientModule=void 0;const s=r(3563),i=r(6202),n=r(3721);let o=class{};t.MicroserviceClientModule=o,t.MicroserviceClientModule=o=a([(0,s.Module)({providers:[i.MicroserviceClientService],controllers:[n.MicroserviceClientController]})],o)},6202:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.MicroserviceClientService=void 0;const i=r(3563),n=r(2510);let o=class{constructor(){this.client=n.ClientProxyFactory.create({transport:n.Transport.MQTT,options:{host:"localhost",port:1883}})}async sendMessage(e){return this.client.send("message",e).toPromise()}};t.MicroserviceClientService=o,t.MicroserviceClientService=o=a([(0,i.Injectable)(),s("design:paramtypes",[])],o)},6959:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.MqttModule=void 0;const s=r(3563),i=r(824),n=r(2664);let o=class{};t.MqttModule=o,t.MqttModule=o=a([(0,s.Module)({providers:[i.MqttService,n.ConfigService],exports:[i.MqttService]})],o)},824:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.MqttService=void 0;const i=r(3563),n=r(2630),o=r(2664);let l=class{constructor(e){this.configService=e}onModuleInit(){const e=this.configService.get("host"),t=this.configService.get("port"),r=`mqtt_${Math.random().toString(16).slice(3)}`,a=`mqtt://${e}:${t}`;this.mqttClient=(0,n.connect)(a,{clientId:r,clean:!0,connectTimeout:4e3,reconnectPeriod:1e3}),this.mqttClient.on("connect",(function(){console.log("Connected to CloudMQTT")})),this.mqttClient.on("error",(function(){}))}publish(e,t){return this.mqttClient.publish(e,t),`Publishing to ${e}`}};t.MqttService=l,t.MqttService=l=a([(0,i.Injectable)(),s("design:paramtypes",[o.ConfigService])],l)},5851:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.NoteModule=void 0;const s=r(3563);let i=class{};t.NoteModule=i,t.NoteModule=i=a([(0,s.Module)({})],i)},2283:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.PostModule=void 0;const s=r(3563);let i=class{};t.PostModule=i,t.PostModule=i=a([(0,s.Module)({})],i)},2347:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Scada3DController=void 0;const n=r(3563),o=r(1192);let l=class{constructor(e){this.scada3DService=e}getData(){return this.scada3DService.getData()}insert3D(e){return this.scada3DService.insert3D(e)}update3D(e){return this.scada3DService.update3D(e)}delete3D(e){return this.scada3DService.delete3D(e)}};t.Scada3DController=l,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getData",null),a([(0,n.Post)("/insert_3D"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"insert3D",null),a([(0,n.Put)("/update_3D"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"update3D",null),a([(0,n.Delete)("/delete_3D"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"delete3D",null),t.Scada3DController=l=a([(0,n.Controller)("3D"),s("design:paramtypes",[o.Scada3DService])],l)},4288:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t._3DEntity=void 0;const i=r(3132);let n=class{};t._3DEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"parent",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"left",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"top",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"width",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"height",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"cssCode",void 0),t._3DEntity=n=a([(0,i.Entity)("3D")],n)},8271:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.Scada3DModule=void 0;const s=r(3563),i=r(1192),n=r(2347),o=r(2449),l=r(9522),c=r(4288);let d=class{};t.Scada3DModule=d,t.Scada3DModule=d=a([(0,s.Module)({imports:[l.TypeOrmModule.forFeature([c._3DEntity]),o.SocketIoModule],providers:[i.Scada3DService],controllers:[n.Scada3DController]})],d)},1192:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Scada3DService=void 0;const n=r(3563),o=r(9522),l=r(3132),c=r(4288),d=r(7247),u=r(6277);let p=class{constructor(e,t){this._3DRepository=e,this.socketGateway=t}onModuleInit(){this.setupDataRefreshInterval()}setupDataRefreshInterval(){this.intervalId||(this.intervalId=setInterval((async()=>{await this.fetchDataAndUpdate()}),500))}async fetchDataAndUpdate(){try{if(u.refreshData3D){u.refreshData3D=!1;try{u.result3D=await this._3DRepository.find(),this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("Update3D",u.result3D)}catch(e){console.log(e)}}}catch(e){console.log(e)}}async getData(){return u.result3D}async insert3D(e){try{e._id="a"+Math.random().toString(36);const t=this._3DRepository.create(e);return await this._3DRepository.save(t),u.refreshData3D=!0,{result:"success",message:"Add 3D Success",data:{}}}catch(e){return console.log(e),{result:"error",data:{},message:e.message}}}async update3D(e){try{return await this._3DRepository.update(e._id,e),u.refreshData3D=!0,{result:"success",message:"Update 3D Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}async delete3D(e){try{return await this._3DRepository.delete(e),u.refreshData3D=!0,{result:"success",message:"Delete 3D Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.Scada3DService=p,t.Scada3DService=p=a([(0,n.Injectable)(),i(0,(0,o.InjectRepository)(c._3DEntity)),s("design:paramtypes",[l.Repository,d.SocketGateway])],p)},6525:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaBackgroundImageLibraryController=void 0;const n=r(3563),o=r(2790);let l=class{constructor(e){this.scadaBackgroundImageLibraryService=e}getData(){return this.scadaBackgroundImageLibraryService.getData()}getDataQuery(e){return this.scadaBackgroundImageLibraryService.getDataQuery(e)}upload(e){return this.scadaBackgroundImageLibraryService.upload(e)}update(e){return this.scadaBackgroundImageLibraryService.update(e)}delete(e){return this.scadaBackgroundImageLibraryService.delete(e)}};t.ScadaBackgroundImageLibraryController=l,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getData",null),a([(0,n.Get)("/getdata_query"),i(0,(0,n.Query)("screenName")),s("design:type",Function),s("design:paramtypes",[String]),s("design:returntype",void 0)],l.prototype,"getDataQuery",null),a([(0,n.Post)("/upload"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"upload",null),a([(0,n.Put)("/update"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"update",null),a([(0,n.Delete)("/delete"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"delete",null),t.ScadaBackgroundImageLibraryController=l=a([(0,n.Controller)("uploadImageImageBackground"),s("design:paramtypes",[o.ScadaBackgroundImageLibraryService])],l)},6334:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundImageLibraryEntity=void 0;const i=r(3132);let n=class{};t.BackgroundImageLibraryEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)(),s("design:type",String)],n.prototype,"name",void 0),a([(0,i.Column)(),s("design:type",String)],n.prototype,"img",void 0),a([(0,i.Column)({nullable:!0,default:0}),s("design:type",Number)],n.prototype,"width",void 0),a([(0,i.Column)({nullable:!0,default:0}),s("design:type",Number)],n.prototype,"height",void 0),t.BackgroundImageLibraryEntity=n=a([(0,i.Entity)("ImageBackgroundImageLibrary")],n)},69:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaBackgroundImageLibraryModule=void 0;const s=r(3563),i=r(2449),n=r(9522),o=r(6334),l=r(6525),c=r(2790);let d=class{};t.ScadaBackgroundImageLibraryModule=d,t.ScadaBackgroundImageLibraryModule=d=a([(0,s.Module)({imports:[n.TypeOrmModule.forFeature([o.BackgroundImageLibraryEntity]),i.SocketIoModule],controllers:[l.ScadaBackgroundImageLibraryController],providers:[c.ScadaBackgroundImageLibraryService]})],d)},2790:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaBackgroundImageLibraryService=void 0;const n=r(3563),o=r(9522),l=r(3132),c=r(7247),d=r(6334),u=r(6277);let p=class{constructor(e,t){this.BackgroundImageLibraryRepository=e,this.socketGateway=t}onModuleInit(){this.setupDataRefreshInterval()}setupDataRefreshInterval(){this.intervalId||(this.intervalId=setInterval((async()=>{await this.fetchDataAndUpdate()}),500))}async fetchDataAndUpdate(){try{if(u.refreshDataImageBackgroundImageLibrary){u.refreshDataImageBackgroundImageLibrary=!1;try{u.resultImageBackgroundImageLibrary=await this.BackgroundImageLibraryRepository.find(),this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateImageBackgroundImageLibrary",u.resultImageBackgroundImageLibrary)}catch(e){console.log(e)}}}catch(e){console.log(e)}}async getData(){return u.resultImageBackgroundImageLibrary}async getDataQuery(e){return await this.BackgroundImageLibraryRepository.query('SELECT * FROM ImageBackgroundImageLibrary WHERE name="'+e+'"')}async upload(e){try{if(3!==e.data.match(/^data:([A-Za-z-+\/]+);base64,(.+)$/).length)return{result:"error",data:{},message:"Invalid input string"};let t={_id:"a"+Math.random().toString(36),name:e.name,img:e.data,enable:e.enable,width:e.width,height:e.height};const r=this.BackgroundImageLibraryRepository.create(t);return await this.BackgroundImageLibraryRepository.save(r),u.refreshDataImageBackgroundImageLibrary=!0,{result:"success",message:"Add Background Image Library Success",data:{}}}catch(e){return console.log(e),{result:"error",data:{},message:e.message}}}async delete(e){try{return await this.BackgroundImageLibraryRepository.delete(e),u.refreshDataImageBackgroundImageLibrary=!0,{result:"success",message:"Delete Background Image Library Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}async update(e){try{return await this.BackgroundImageLibraryRepository.update(e._id,e),u.refreshDataImageBackgroundImageLibrary=!0,{result:"success",message:"Update Background Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.ScadaBackgroundImageLibraryService=p,t.ScadaBackgroundImageLibraryService=p=a([(0,n.Injectable)(),i(0,(0,o.InjectRepository)(d.BackgroundImageLibraryEntity)),s("design:paramtypes",[l.Repository,c.SocketGateway])],p)},7503:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaBitAdjustImageLibraryController=void 0;const n=r(3563),o=r(7332);let l=class{constructor(e){this.scadaBitAdjustImageLibraryService=e}getData(){return this.scadaBitAdjustImageLibraryService.getData()}upload(e){return this.scadaBitAdjustImageLibraryService.upload(e)}delete(e){return this.scadaBitAdjustImageLibraryService.delete(e)}};t.ScadaBitAdjustImageLibraryController=l,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getData",null),a([(0,n.Post)("/upload"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"upload",null),a([(0,n.Delete)("/delete"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"delete",null),t.ScadaBitAdjustImageLibraryController=l=a([(0,n.Controller)("uploadImageBitAdjust"),s("design:paramtypes",[o.ScadaBitAdjustImageLibraryService])],l)},2428:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.BitAdjustImageLibraryEntity=void 0;const i=r(3132);let n=class{};t.BitAdjustImageLibraryEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)(),s("design:type",String)],n.prototype,"name",void 0),a([(0,i.Column)(),s("design:type",String)],n.prototype,"img",void 0),t.BitAdjustImageLibraryEntity=n=a([(0,i.Entity)("BitAdjustImageLibrary")],n)},3115:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaBitAdjustImageLibraryModule=void 0;const s=r(3563),i=r(2449),n=r(9522),o=r(2428),l=r(7503),c=r(7332);let d=class{};t.ScadaBitAdjustImageLibraryModule=d,t.ScadaBitAdjustImageLibraryModule=d=a([(0,s.Module)({imports:[n.TypeOrmModule.forFeature([o.BitAdjustImageLibraryEntity]),i.SocketIoModule],controllers:[l.ScadaBitAdjustImageLibraryController],providers:[c.ScadaBitAdjustImageLibraryService]})],d)},7332:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaBitAdjustImageLibraryService=void 0;const n=r(3563),o=r(9522),l=r(3132),c=r(7247),d=r(2428),u=r(6277);let p=class{constructor(e,t){this.bitDisplayImageLibraryRepository=e,this.socketGateway=t}onModuleInit(){this.setupDataRefreshInterval()}setupDataRefreshInterval(){this.intervalId||(this.intervalId=setInterval((async()=>{await this.fetchDataAndUpdate()}),500))}async fetchDataAndUpdate(){try{if(u.refreshDataBitAdjustImageLibrary){u.refreshDataBitAdjustImageLibrary=!1;try{u.resultBitAdjustImageLibrary=await this.bitDisplayImageLibraryRepository.find(),this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateBitAdjustImageLibrary",u.resultBitAdjustImageLibrary)}catch(e){console.log(e)}}}catch(e){console.log(e)}}async getData(){return u.resultBitAdjustImageLibrary}async upload(e){try{if(3!==e.data.match(/^data:([A-Za-z-+\/]+);base64,(.+)$/).length)return{result:"error",data:{},message:"Invalid input string"};let t={_id:"a"+Math.random().toString(36),name:e.name,img:e.data};const r=this.bitDisplayImageLibraryRepository.create(t);return await this.bitDisplayImageLibraryRepository.save(r),u.refreshDataBitAdjustImageLibrary=!0,{result:"success",message:"Add BitAdjust Image Library Success",data:{}}}catch(e){return console.log(e),{result:"error",data:{},message:e.message}}}async delete(e){try{return await this.bitDisplayImageLibraryRepository.delete(e),u.refreshDataBitAdjustImageLibrary=!0,{result:"success",message:"Delete BitAdjust Image Library Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.ScadaBitAdjustImageLibraryService=p,t.ScadaBitAdjustImageLibraryService=p=a([(0,n.Injectable)(),i(0,(0,o.InjectRepository)(d.BitAdjustImageLibraryEntity)),s("design:paramtypes",[l.Repository,c.SocketGateway])],p)},9742:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaBitAdjustRefreshService=void 0;const i=r(3563),n=r(7247),o=r(6277);let l=class{constructor(e){this.socketGateway=e}refreshData(){let e=!1;try{if(Array.isArray(o.haveChangeArrBitAdjust))for(let t=0;t<o.haveChangeArrBitAdjust.length;t++)if(o.haveChangeArrBitAdjust[t]){if(e=!1,o.haveChangeArrBitAdjust[t]=!1,Array.isArray(o.resultBitAdjust))for(let r=0;r<o.resultBitAdjust.length;r++)"0"===o.resultBitAdjust[r].idDevice&&0==t?Array.isArray(o.BitAdjust[0])&&o.BitAdjust[0]&&(o.resultBitAdjust[r].tag<=o.BitAdjust[0].length&&(o.resultBitAdjust[r].status=o.BitAdjust[0][o.resultBitAdjust[r].tag]),e=!0):parseInt(o.resultBitAdjust[r].idDevice)&&t>0&&o.BitAdjust[parseInt(o.resultBitAdjust[r].idDevice)]&&(o.resultBitAdjust[r].tag<=o.BitAdjust[parseInt(o.resultBitAdjust[r].idDevice)].length&&(o.resultBitAdjust[r].status=o.BitAdjust[parseInt(o.resultBitAdjust[r].idDevice)][o.resultBitAdjust[r].tag]),e=!0);if(e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateBitAdjust",o.resultBitAdjust),e=!1,Array.isArray(o.resultProjectScreen_BitAdjust))for(let r=0;r<o.resultProjectScreen_BitAdjust.length;r++)"0"===o.resultProjectScreen_BitAdjust[r].idDevice&&0==t?Array.isArray(o.BitAdjust[0])&&o.BitAdjust[0]&&(o.resultProjectScreen_BitAdjust[r].tag<=o.BitAdjust[0].length&&(o.resultProjectScreen_BitAdjust[r].status=o.BitAdjust[0][o.resultProjectScreen_BitAdjust[r].tag]),e=!0):parseInt(o.resultProjectScreen_BitAdjust[r].idDevice)&&t>0&&o.BitAdjust[parseInt(o.resultProjectScreen_BitAdjust[r].idDevice)]&&(o.resultProjectScreen_BitAdjust[r].tag<=o.BitAdjust[parseInt(o.resultProjectScreen_BitAdjust[r].idDevice)].length&&(o.resultProjectScreen_BitAdjust[r].status=o.BitAdjust[parseInt(o.resultProjectScreen_BitAdjust[r].idDevice)][o.resultProjectScreen_BitAdjust[r].tag]),e=!0);if(e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateScreen_BitAdjust",o.resultProjectScreen_BitAdjust),e=!1,Array.isArray(o.resultProjectScreen_Element))for(let t=0;t<o.resultProjectScreen_Element.length;t++)isNaN(o.resultProjectScreen_Element[t].idDevice)||((o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)][parseInt(o.resultProjectScreen_Element[t].tagBit)]&&o.resultProjectScreen_Element[t].tagOn||!o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)][parseInt(o.resultProjectScreen_Element[t].tagBit)]&&o.resultProjectScreen_Element[t].tagOff)&&(o.resultProjectScreen_Element[t].status=2),o.resultProjectScreen_Element[t].tagOff&&o.BitDisplay[parseInt(o.resultProjectScreen_Element[t].idDevice)]&&parseInt(o.resultProjectScreen_Element[t].tagOff)<=o.BitDisplay[parseInt(o.resultProjectScreen_Element[t].idDevice)].length&&(parseInt(o.resultProjectScreen_Element[t].notOff)?o.BitDisplay[parseInt(o.resultProjectScreen_Element[t].idDevice)][o.resultProjectScreen_Element[t].tagOff]||(o.resultProjectScreen_Element[t].status=0,e=!0):o.BitDisplay[parseInt(o.resultProjectScreen_Element[t].idDevice)][o.resultProjectScreen_Element[t].tagOff]&&(o.resultProjectScreen_Element[t].status=0,e=!0)),o.resultProjectScreen_Element[t].tagOn&&o.BitDisplay[parseInt(o.resultProjectScreen_Element[t].idDevice)]&&parseInt(o.resultProjectScreen_Element[t].tagOn)<=o.BitDisplay[parseInt(o.resultProjectScreen_Element[t].idDevice)].length&&(parseInt(o.resultProjectScreen_Element[t].notOn)?o.BitDisplay[parseInt(o.resultProjectScreen_Element[t].idDevice)][o.resultProjectScreen_Element[t].tagOn]||(o.resultProjectScreen_Element[t].status=1,e=!0):o.BitDisplay[parseInt(o.resultProjectScreen_Element[t].idDevice)][o.resultProjectScreen_Element[t].tagOn]&&(o.resultProjectScreen_Element[t].status=1,e=!0)),o.resultProjectScreen_Element[t].tagFault&&o.BitDisplay[parseInt(o.resultProjectScreen_Element[t].idDevice)]&&parseInt(o.resultProjectScreen_Element[t].tagFault)<=o.BitDisplay[parseInt(o.resultProjectScreen_Element[t].idDevice)].length&&o.BitDisplay[parseInt(o.resultProjectScreen_Element[t].idDevice)][o.resultProjectScreen_Element[t].tagFault]&&(o.resultProjectScreen_Element[t].status=3,e=!0));if(e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateScreen_Element",o.resultProjectScreen_Element),e=!1,Array.isArray(o.resultElement))for(let t=0;t<o.resultElement.length;t++)isNaN(o.resultElement[t].idDevice)||((o.BitAdjust[parseInt(o.resultElement[t].idDevice)][parseInt(o.resultElement[t].tagBit)]&&o.resultElement[t].tagOn||!o.BitAdjust[parseInt(o.resultElement[t].idDevice)][parseInt(o.resultElement[t].tagBit)]&&o.resultElement[t].tagOff)&&(o.resultElement[t].status=2,e=!0),o.resultElement[t].tagOff&&o.BitDisplay[parseInt(o.resultElement[t].idDevice)]&&parseInt(o.resultElement[t].tagOff)<=o.BitDisplay[parseInt(o.resultElement[t].idDevice)].length&&(parseInt(o.resultElement[t].notOff)?o.BitDisplay[parseInt(o.resultElement[t].idDevice)][o.resultElement[t].tagOff]||(o.resultElement[t].status=0,e=!0):o.BitDisplay[parseInt(o.resultElement[t].idDevice)][o.resultElement[t].tagOff]&&(o.resultElement[t].status=0,e=!0)),o.resultElement[t].tagOn&&o.BitDisplay[parseInt(o.resultElement[t].idDevice)]&&parseInt(o.resultElement[t].tagOn)<=o.BitDisplay[parseInt(o.resultElement[t].idDevice)].length&&(parseInt(o.resultElement[t].notOn)?o.BitDisplay[parseInt(o.resultElement[t].idDevice)][o.resultElement[t].tagOn]||(o.resultElement[t].status=1,e=!0):o.BitDisplay[parseInt(o.resultElement[t].idDevice)][o.resultElement[t].tagOn]&&(o.resultElement[t].status=1,e=!0)),o.resultElement[t].tagFault&&o.BitDisplay[parseInt(o.resultElement[t].idDevice)]&&parseInt(o.resultElement[t].tagFault)<=o.BitDisplay[parseInt(o.resultElement[t].idDevice)].length&&o.BitDisplay[parseInt(o.resultElement[t].idDevice)][o.resultElement[t].tagFault]&&(o.resultElement[t].status=3,e=!0));if(e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateElement",o.resultElement),e=!1,Array.isArray(o.resultProjectScreen_Element))for(let t=0;t<o.resultProjectScreen_Element.length;t++)isNaN(o.resultProjectScreen_Element[t].idDevice)||((o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)][parseInt(o.resultProjectScreen_Element[t].tagBit)]&&!o.resultProjectScreen_Element[t].tagOn||!o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)][parseInt(o.resultProjectScreen_Element[t].tagBit)]&&!o.resultProjectScreen_Element[t].tagOff)&&(o.resultProjectScreen_Element[t].status=2,e=!0),o.resultProjectScreen_Element[t].tagOff||o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)][parseInt(o.resultProjectScreen_Element[t].tagBit)]||!o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)]||parseInt(o.resultProjectScreen_Element[t].tagBit)<=o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)].length&&(o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)][o.resultProjectScreen_Element[t].tagBit]||(o.resultProjectScreen_Element[t].status=0,e=!0)),!o.resultProjectScreen_Element[t].tagOn&&o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)][parseInt(o.resultProjectScreen_Element[t].tagBit)]&&o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)]&&parseInt(o.resultProjectScreen_Element[t].tagBit)<=o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)].length&&o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)][o.resultProjectScreen_Element[t].tagBit]&&(o.resultProjectScreen_Element[t].status=1,e=!0));if(e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateScreen_Element",o.resultProjectScreen_Element),e=!1,Array.isArray(o.resultElement))for(let t=0;t<o.resultElement.length;t++)isNaN(o.resultElement[t].idDevice)||((o.BitAdjust[parseInt(o.resultElement[t].idDevice)][parseInt(o.resultElement[t].tagBit)]&&!o.resultElement[t].tagOn||!o.BitAdjust[parseInt(o.resultElement[t].idDevice)][parseInt(o.resultElement[t].tagBit)]&&!o.resultElement[t].tagOff)&&(o.resultElement[t].status=2,e=!0),o.resultElement[t].tagOff||o.BitAdjust[parseInt(o.resultElement[t].idDevice)][parseInt(o.resultElement[t].tagBit)]||!o.BitAdjust[parseInt(o.resultElement[t].idDevice)]||parseInt(o.resultElement[t].tagBit)<=o.BitAdjust[parseInt(o.resultElement[t].idDevice)].length&&(o.BitAdjust[parseInt(o.resultElement[t].idDevice)][o.resultElement[t].tagBit]||(o.resultElement[t].status=0,e=!0)),!o.resultElement[t].tagOn&&o.BitAdjust[parseInt(o.resultElement[t].idDevice)][parseInt(o.resultElement[t].tagBit)]&&o.BitAdjust[parseInt(o.resultElement[t].idDevice)]&&parseInt(o.resultElement[t].tagBit)<=o.BitAdjust[parseInt(o.resultElement[t].idDevice)].length&&o.BitAdjust[parseInt(o.resultElement[t].idDevice)][o.resultElement[t].tagBit]&&(o.resultElement[t].status=1,e=!0));if(e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateElement",o.resultElement),e=!1,Array.isArray(o.resultLine))for(let t=0;t<o.resultLine.length;t++)"BitAdjust"==o.resultLine[t].typeTag&&!isNaN(o.resultLine[t].idDevice)&&o.BitAdjust[parseInt(o.resultLine[t].idDevice)]&&parseInt(o.resultLine[t].tag)<=o.BitAdjust[parseInt(o.resultLine[t].idDevice)].length&&(o.BitAdjust[parseInt(o.resultLine[t].idDevice)][o.resultLine[t].tag]?(o.resultLine[t].status=1,e=!0):(o.resultLine[t].status=0,e=!0));if(e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateLine",o.resultLine),e=!1,Array.isArray(o.resultProjectScreen_Line))for(let t=0;t<o.resultProjectScreen_Line.length;t++)"BitAdjust"==o.resultProjectScreen_Line[t].typeTag&&!isNaN(o.resultProjectScreen_Line[t].idDevice)&&o.BitAdjust[parseInt(o.resultProjectScreen_Line[t].idDevice)]&&parseInt(o.resultProjectScreen_Line[t].tag)<=o.BitAdjust[parseInt(o.resultProjectScreen_Line[t].idDevice)].length&&(o.BitAdjust[parseInt(o.resultProjectScreen_Line[t].idDevice)][o.resultProjectScreen_Line[t].tag]?(o.resultProjectScreen_Line[t].status=1,e=!0):(o.resultProjectScreen_Line[t].status=0,e=!0));e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateScreen_Line",o.resultProjectScreen_Line)}}catch(e){console.log(e)}}};t.ScadaBitAdjustRefreshService=l,t.ScadaBitAdjustRefreshService=l=a([(0,i.Injectable)(),s("design:paramtypes",[n.SocketGateway])],l)},5699:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaBitAdjustController=void 0;const n=r(3563),o=r(4672);let l=class{constructor(e){this.scadaBitAdjustService=e}getData(){return this.scadaBitAdjustService.getData()}insertBitAdjust(e){return this.scadaBitAdjustService.insertBitAdjust(e)}updateBitAdjust(e){return this.scadaBitAdjustService.updateBitAdjust(e)}deleteBitAdjust(e){return this.scadaBitAdjustService.deleteBitAdjust(e)}};t.ScadaBitAdjustController=l,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getData",null),a([(0,n.Post)("/insert_bitAdjust"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"insertBitAdjust",null),a([(0,n.Put)("/update_bitAdjust"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"updateBitAdjust",null),a([(0,n.Delete)("/delete_bitAdjust"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"deleteBitAdjust",null),t.ScadaBitAdjustController=l=a([(0,n.Controller)("bitAdjust"),s("design:paramtypes",[o.ScadaBitAdjustService])],l)},3048:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.BitAdjustEntity=void 0;const i=r(3132);let n=class{};t.BitAdjustEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"parent",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"idGroupControl",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"idDevice",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"typeDevice",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"status",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"left",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"top",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"width",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"height",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"text",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"tag",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"type",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"borderRadius",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"colorText",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"colorOn",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"colorOff",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"myKeyPress",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"levelUser",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"fontSize",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"unit",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"nameImage0",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"nameImage1",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"borderWidthOn",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"borderWidthOff",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"blink0",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"blink1",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"enableLogData",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"zIndex",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"cssCode",void 0),t.BitAdjustEntity=n=a([(0,i.Entity)("BitAdjust")],n)},7239:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaBitAdjustModule=void 0;const s=r(3563),i=r(5699),n=r(4672),o=r(2449),l=r(9522),c=r(3048);let d=class{};t.ScadaBitAdjustModule=d,t.ScadaBitAdjustModule=d=a([(0,s.Module)({imports:[l.TypeOrmModule.forFeature([c.BitAdjustEntity]),o.SocketIoModule],controllers:[i.ScadaBitAdjustController],providers:[n.ScadaBitAdjustService]})],d)},4672:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaBitAdjustService=void 0;const n=r(3563),o=r(9522),l=r(3132),c=r(3048),d=r(7247),u=r(6277);let p=class{constructor(e,t){this.bitAdjustRepository=e,this.socketGateway=t}onModuleInit(){this.setupDataRefreshInterval()}setupDataRefreshInterval(){this.intervalId||(this.intervalId=setInterval((async()=>{await this.fetchDataAndUpdate()}),500))}async fetchDataAndUpdate(){try{if(u.refreshDataBitAdjust){u.refreshDataBitAdjust=!1;try{u.resultBitAdjust=await this.bitAdjustRepository.find(),this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateBitAdjust",u.resultBitAdjust),u.OldBitAdjust=[]}catch(e){console.log(e)}}}catch(e){console.log(e)}}async getData(){return u.resultBitAdjust}async insertBitAdjust(e){try{e._id="a"+Math.random().toString(36),e.status=0;const t=this.bitAdjustRepository.create(e);return await this.bitAdjustRepository.save(t),u.refreshDataBitAdjust=!0,{result:"success",message:"Add BitAdjust Success",data:{}}}catch(e){return console.log(e),{result:"error",data:{},message:e.message}}}async updateBitAdjust(e){try{return await this.bitAdjustRepository.update(e._id,e),u.refreshDataBitAdjust=!0,{result:"success",message:"Update BitAdjust Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}async deleteBitAdjust(e){try{return await this.bitAdjustRepository.delete(e),u.refreshDataBitAdjust=!0,{result:"success",message:"Delete BitAdjust Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.ScadaBitAdjustService=p,t.ScadaBitAdjustService=p=a([(0,n.Injectable)(),i(0,(0,o.InjectRepository)(c.BitAdjustEntity)),s("design:paramtypes",[l.Repository,d.SocketGateway])],p)},1021:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaBitDisplayImageLibraryController=void 0;const n=r(3563),o=r(7702);let l=class{constructor(e){this.scadaBitDisplayImageLibraryService=e}getData(){return this.scadaBitDisplayImageLibraryService.getData()}upload(e){return this.scadaBitDisplayImageLibraryService.upload(e)}delete(e){return this.scadaBitDisplayImageLibraryService.delete(e)}};t.ScadaBitDisplayImageLibraryController=l,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getData",null),a([(0,n.Post)("/upload"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"upload",null),a([(0,n.Delete)("/delete"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"delete",null),t.ScadaBitDisplayImageLibraryController=l=a([(0,n.Controller)("uploadImage"),s("design:paramtypes",[o.ScadaBitDisplayImageLibraryService])],l)},7822:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.BitDisplayImageLibraryEntity=void 0;const i=r(3132);let n=class{};t.BitDisplayImageLibraryEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)(),s("design:type",String)],n.prototype,"name",void 0),a([(0,i.Column)(),s("design:type",String)],n.prototype,"img",void 0),t.BitDisplayImageLibraryEntity=n=a([(0,i.Entity)("BitDisplayImageLibrary")],n)},2181:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaBitDisplayImageLibraryModule=void 0;const s=r(3563),i=r(2449),n=r(9522),o=r(7822),l=r(1021),c=r(7702);let d=class{};t.ScadaBitDisplayImageLibraryModule=d,t.ScadaBitDisplayImageLibraryModule=d=a([(0,s.Module)({imports:[n.TypeOrmModule.forFeature([o.BitDisplayImageLibraryEntity]),i.SocketIoModule],controllers:[l.ScadaBitDisplayImageLibraryController],providers:[c.ScadaBitDisplayImageLibraryService]})],d)},7702:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaBitDisplayImageLibraryService=void 0;const n=r(3563),o=r(9522),l=r(3132),c=r(7247),d=r(7822),u=r(6277);let p=class{constructor(e,t){this.bitDisplayImageLibraryRepository=e,this.socketGateway=t}onModuleInit(){this.setupDataRefreshInterval()}setupDataRefreshInterval(){this.intervalId||(this.intervalId=setInterval((async()=>{await this.fetchDataAndUpdate()}),500))}async fetchDataAndUpdate(){try{if(u.refreshDataBitDisplayImageLibrary){u.refreshDataBitDisplayImageLibrary=!1;try{u.resultBitDisplayImageLibrary=await this.bitDisplayImageLibraryRepository.find(),this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateBitDisplayImageLibrary",u.resultBitDisplayImageLibrary)}catch(e){console.log(e)}}}catch(e){console.log(e)}}async getData(){return u.resultBitDisplayImageLibrary}async upload(e){try{if(3!==e.data.match(/^data:([A-Za-z-+\/]+);base64,(.+)$/).length)return{result:"error",data:{},message:"Invalid input string"};let t={_id:"a"+Math.random().toString(36),name:e.name,img:e.data};const r=this.bitDisplayImageLibraryRepository.create(t);return await this.bitDisplayImageLibraryRepository.save(r),u.refreshDataBitDisplayImageLibrary=!0,{result:"success",message:"Add BitDisplay Image Library Success",data:{}}}catch(e){return console.log(e),{result:"error",data:{},message:e.message}}}async delete(e){try{return await this.bitDisplayImageLibraryRepository.delete(e),u.refreshDataBitDisplayImageLibrary=!0,{result:"success",message:"Delete BitDisplay Image Library Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.ScadaBitDisplayImageLibraryService=p,t.ScadaBitDisplayImageLibraryService=p=a([(0,n.Injectable)(),i(0,(0,o.InjectRepository)(d.BitDisplayImageLibraryEntity)),s("design:paramtypes",[l.Repository,c.SocketGateway])],p)},7888:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaBitDisplayRefreshService=void 0;const i=r(3563),n=r(7247),o=r(6277);let l=class{constructor(e){this.socketGateway=e}refreshData(){let e=!1;try{if(Array.isArray(o.haveChangeArrBitDisplay))for(let t=0;t<o.haveChangeArrBitDisplay.length;t++)if(o.haveChangeArrBitDisplay[t]){if(e=!1,o.haveChangeArrBitDisplay[t]=!1,Array.isArray(o.resultBitDisplay))for(let r=0;r<o.resultBitDisplay.length;r++)"0"===o.resultBitDisplay[r].idDevice&&0==t?Array.isArray(o.BitDisplay[0])&&o.BitDisplay[0]&&(o.resultBitDisplay[r].tag<=o.BitDisplay[0].length&&(o.resultBitDisplay[r].status=o.BitDisplay[0][o.resultBitDisplay[r].tag]),e=!0):parseInt(o.resultBitDisplay[r].idDevice)&&t>0&&o.BitDisplay[parseInt(o.resultBitDisplay[r].idDevice)]&&(o.resultBitDisplay[r].tag<=o.BitDisplay[parseInt(o.resultBitDisplay[r].idDevice)].length&&(o.resultBitDisplay[r].status=o.BitDisplay[parseInt(o.resultBitDisplay[r].idDevice)][o.resultBitDisplay[r].tag]),e=!0);if(e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateBitDisplay",o.resultBitDisplay),e=!1,Array.isArray(o.resultProjectScreen_BitDisplay))for(let t=0;t<o.resultProjectScreen_BitDisplay.length;t++)o.resultProjectScreen_BitDisplay[t].idDevice&&Array.isArray(o.BitDisplay[parseInt(o.resultProjectScreen_BitDisplay[t].idDevice)])&&o.BitDisplay[parseInt(o.resultProjectScreen_BitDisplay[t].idDevice)]&&(o.resultProjectScreen_BitDisplay[t].tag<=o.BitDisplay[parseInt(o.resultProjectScreen_BitDisplay[t].idDevice)].length&&(o.resultProjectScreen_BitDisplay[t].status=o.BitDisplay[parseInt(o.resultProjectScreen_BitDisplay[t].idDevice)][o.resultProjectScreen_BitDisplay[t].tag]),e=!0);if(e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateScreen_BitDisplay",o.resultProjectScreen_BitDisplay),e=!1,Array.isArray(o.resultProjectScreen_Element))for(let t=0;t<o.resultProjectScreen_Element.length;t++)isNaN(o.resultProjectScreen_Element[t].idDevice)||((o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)][parseInt(o.resultProjectScreen_Element[t].tagBit)]&&o.resultProjectScreen_Element[t].tagOn||!o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)][parseInt(o.resultProjectScreen_Element[t].tagBit)]&&o.resultProjectScreen_Element[t].tagOff)&&(o.resultProjectScreen_Element[t].status=2),o.resultProjectScreen_Element[t].tagOff&&o.BitDisplay[parseInt(o.resultProjectScreen_Element[t].idDevice)]&&parseInt(o.resultProjectScreen_Element[t].tagOff)<=o.BitDisplay[parseInt(o.resultProjectScreen_Element[t].idDevice)].length&&(parseInt(o.resultProjectScreen_Element[t].notOff)?o.BitDisplay[parseInt(o.resultProjectScreen_Element[t].idDevice)][o.resultProjectScreen_Element[t].tagOff]||(o.resultProjectScreen_Element[t].status=0,e=!0):o.BitDisplay[parseInt(o.resultProjectScreen_Element[t].idDevice)][o.resultProjectScreen_Element[t].tagOff]&&(o.resultProjectScreen_Element[t].status=0,e=!0)),o.resultProjectScreen_Element[t].tagOn&&o.BitDisplay[parseInt(o.resultProjectScreen_Element[t].idDevice)]&&parseInt(o.resultProjectScreen_Element[t].tagOn)<=o.BitDisplay[parseInt(o.resultProjectScreen_Element[t].idDevice)].length&&(parseInt(o.resultProjectScreen_Element[t].notOn)?o.BitDisplay[parseInt(o.resultProjectScreen_Element[t].idDevice)][o.resultProjectScreen_Element[t].tagOn]||(o.resultProjectScreen_Element[t].status=1,e=!0):o.BitDisplay[parseInt(o.resultProjectScreen_Element[t].idDevice)][o.resultProjectScreen_Element[t].tagOn]&&(o.resultProjectScreen_Element[t].status=1,e=!0)),o.resultProjectScreen_Element[t].tagFault&&o.BitDisplay[parseInt(o.resultProjectScreen_Element[t].idDevice)]&&parseInt(o.resultProjectScreen_Element[t].tagFault)<=o.BitDisplay[parseInt(o.resultProjectScreen_Element[t].idDevice)].length&&o.BitDisplay[parseInt(o.resultProjectScreen_Element[t].idDevice)][o.resultProjectScreen_Element[t].tagFault]&&(o.resultProjectScreen_Element[t].status=3,e=!0));if(e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateScreen_Element",o.resultProjectScreen_Element),e=!1,Array.isArray(o.resultElement))for(let t=0;t<o.resultElement.length;t++)isNaN(o.resultElement[t].idDevice)||((o.BitAdjust[parseInt(o.resultElement[t].idDevice)][parseInt(o.resultElement[t].tagBit)]&&o.resultElement[t].tagOn||!o.BitAdjust[parseInt(o.resultElement[t].idDevice)][parseInt(o.resultElement[t].tagBit)]&&o.resultElement[t].tagOff)&&(o.resultElement[t].status=2,e=!0),o.resultElement[t].tagOff&&o.BitDisplay[parseInt(o.resultElement[t].idDevice)]&&parseInt(o.resultElement[t].tagOff)<=o.BitDisplay[parseInt(o.resultElement[t].idDevice)].length&&(parseInt(o.resultElement[t].notOff)?o.BitDisplay[parseInt(o.resultElement[t].idDevice)][o.resultElement[t].tagOff]||(o.resultElement[t].status=0,e=!0):o.BitDisplay[parseInt(o.resultElement[t].idDevice)][o.resultElement[t].tagOff]&&(o.resultElement[t].status=0,e=!0)),o.resultElement[t].tagOn&&o.BitDisplay[parseInt(o.resultElement[t].idDevice)]&&parseInt(o.resultElement[t].tagOn)<=o.BitDisplay[parseInt(o.resultElement[t].idDevice)].length&&(parseInt(o.resultElement[t].notOn)?o.BitDisplay[parseInt(o.resultElement[t].idDevice)][o.resultElement[t].tagOn]||(o.resultElement[t].status=1,e=!0):o.BitDisplay[parseInt(o.resultElement[t].idDevice)][o.resultElement[t].tagOn]&&(o.resultElement[t].status=1,e=!0)),o.resultElement[t].tagFault&&o.BitDisplay[parseInt(o.resultElement[t].idDevice)]&&parseInt(o.resultElement[t].tagFault)<=o.BitDisplay[parseInt(o.resultElement[t].idDevice)].length&&o.BitDisplay[parseInt(o.resultElement[t].idDevice)][o.resultElement[t].tagFault]&&(o.resultElement[t].status=3,e=!0));if(e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateElement",o.resultElement),e=!1,Array.isArray(o.resultProjectScreen_Element))for(let t=0;t<o.resultProjectScreen_Element.length;t++)isNaN(o.resultProjectScreen_Element[t].idDevice)||((o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)][parseInt(o.resultProjectScreen_Element[t].tagBit)]&&!o.resultProjectScreen_Element[t].tagOn||!o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)][parseInt(o.resultProjectScreen_Element[t].tagBit)]&&!o.resultProjectScreen_Element[t].tagOff)&&(o.resultProjectScreen_Element[t].status=2,e=!0),o.resultProjectScreen_Element[t].tagOff||o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)][parseInt(o.resultProjectScreen_Element[t].tagBit)]||!o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)]||parseInt(o.resultProjectScreen_Element[t].tagBit)<=o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)].length&&(o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)][o.resultProjectScreen_Element[t].tagBit]||(o.resultProjectScreen_Element[t].status=0,e=!0)),!o.resultProjectScreen_Element[t].tagOn&&o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)][parseInt(o.resultProjectScreen_Element[t].tagBit)]&&o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)]&&parseInt(o.resultProjectScreen_Element[t].tagBit)<=o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)].length&&o.BitAdjust[parseInt(o.resultProjectScreen_Element[t].idDevice)][o.resultProjectScreen_Element[t].tagBit]&&(o.resultProjectScreen_Element[t].status=1,e=!0));if(e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateScreen_Element",o.resultProjectScreen_Element),e=!1,Array.isArray(o.resultElement))for(let t=0;t<o.resultElement.length;t++)isNaN(o.resultElement[t].idDevice)||((o.BitAdjust[parseInt(o.resultElement[t].idDevice)][parseInt(o.resultElement[t].tagBit)]&&!o.resultElement[t].tagOn||!o.BitAdjust[parseInt(o.resultElement[t].idDevice)][parseInt(o.resultElement[t].tagBit)]&&!o.resultElement[t].tagOff)&&(o.resultElement[t].status=2,e=!0),o.resultElement[t].tagOff||o.BitAdjust[parseInt(o.resultElement[t].idDevice)][parseInt(o.resultElement[t].tagBit)]||!o.BitAdjust[parseInt(o.resultElement[t].idDevice)]||parseInt(o.resultElement[t].tagBit)<=o.BitAdjust[parseInt(o.resultElement[t].idDevice)].length&&(o.BitAdjust[parseInt(o.resultElement[t].idDevice)][o.resultElement[t].tagBit]||(o.resultElement[t].status=0,e=!0)),!o.resultElement[t].tagOn&&o.BitAdjust[parseInt(o.resultElement[t].idDevice)][parseInt(o.resultElement[t].tagBit)]&&o.BitAdjust[parseInt(o.resultElement[t].idDevice)]&&parseInt(o.resultElement[t].tagBit)<=o.BitAdjust[parseInt(o.resultElement[t].idDevice)].length&&o.BitAdjust[parseInt(o.resultElement[t].idDevice)][o.resultElement[t].tagBit]&&(o.resultElement[t].status=1,e=!0));if(e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateElement",o.resultElement),e=!1,Array.isArray(o.resultLine))for(let t=0;t<o.resultLine.length;t++)"BitDisplay"==o.resultLine[t].typeTag&&!isNaN(o.resultLine[t].idDevice)&&o.BitDisplay[parseInt(o.resultLine[t].idDevice)]&&parseInt(o.resultLine[t].tag)<=o.BitDisplay[parseInt(o.resultLine[t].idDevice)].length&&(o.BitDisplay[parseInt(o.resultLine[t].idDevice)][o.resultLine[t].tag]?(o.resultLine[t].status=1,e=!0):(o.resultLine[t].status=0,e=!0));if(e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateLine",o.resultLine),e=!1,Array.isArray(o.resultProjectScreen_Line))for(let t=0;t<o.resultProjectScreen_Line.length;t++)"BitDisplay"==o.resultProjectScreen_Line[t].typeTag&&!isNaN(o.resultProjectScreen_Line[t].idDevice)&&o.BitDisplay[parseInt(o.resultProjectScreen_Line[t].idDevice)]&&parseInt(o.resultProjectScreen_Line[t].tag)<=o.BitDisplay[parseInt(o.resultProjectScreen_Line[t].idDevice)].length&&(o.BitDisplay[parseInt(o.resultProjectScreen_Line[t].idDevice)][o.resultProjectScreen_Line[t].tag]?(o.resultProjectScreen_Line[t].status=1,e=!0):(o.resultProjectScreen_Line[t].status=0,e=!0));e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateScreen_Line",o.resultProjectScreen_Line)}}catch(e){console.log(e)}}};t.ScadaBitDisplayRefreshService=l,t.ScadaBitDisplayRefreshService=l=a([(0,i.Injectable)(),s("design:paramtypes",[n.SocketGateway])],l)},4073:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaBitDisplayController=void 0;const n=r(3563),o=r(7834);let l=class{constructor(e){this.scadaBitDisplayService=e}getData(){return this.scadaBitDisplayService.getData()}insertBitDisplay(e){return this.scadaBitDisplayService.insertBitDisplay(e)}updateBitDisplay(e){return this.scadaBitDisplayService.updateBitDisplay(e)}deleteBitDisplay(e){return this.scadaBitDisplayService.deleteBitDisplay(e)}};t.ScadaBitDisplayController=l,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getData",null),a([(0,n.Post)("/insert_bitDisplay"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"insertBitDisplay",null),a([(0,n.Put)("/update_bitDisplay"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"updateBitDisplay",null),a([(0,n.Delete)("/delete_bitDisplay"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"deleteBitDisplay",null),t.ScadaBitDisplayController=l=a([(0,n.Controller)("bitDisplay"),s("design:paramtypes",[o.ScadaBitDisplayService])],l)},9314:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.BitDisplayEntity=void 0;const i=r(3132);let n=class{};t.BitDisplayEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"parent",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"status",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"tag",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"text0",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"text1",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"color0",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"color1",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"left",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"top",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"width",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"height",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"zIndex",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"fontSize",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"nameImage0",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"nameImage1",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"type",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"blink0",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"blink1",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"idGroupControl",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"idDevice",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"tagRotate",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"rotate",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"cssCode",void 0),t.BitDisplayEntity=n=a([(0,i.Entity)("BitDisplay")],n)},7305:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaBitDisplayModule=void 0;const s=r(3563),i=r(4073),n=r(7834),o=r(2449),l=r(9522),c=r(9314);let d=class{};t.ScadaBitDisplayModule=d,t.ScadaBitDisplayModule=d=a([(0,s.Module)({imports:[l.TypeOrmModule.forFeature([c.BitDisplayEntity]),o.SocketIoModule],controllers:[i.ScadaBitDisplayController],providers:[n.ScadaBitDisplayService]})],d)},7834:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaBitDisplayService=void 0;const n=r(3563),o=r(9522),l=r(3132),c=r(9314),d=r(7247),u=r(6277);let p=class{constructor(e,t){this.bitDisplayRepository=e,this.socketGateway=t}onModuleInit(){this.setupDataRefreshInterval()}setupDataRefreshInterval(){this.intervalId||(this.intervalId=setInterval((async()=>{await this.fetchDataAndUpdate()}),500))}async fetchDataAndUpdate(){try{if(u.refreshDataBitDisplay){u.refreshDataBitDisplay=!1;try{u.resultBitDisplay=await this.bitDisplayRepository.find(),this.socketGateway&&this.socketGateway.server&&(this.socketGateway.server.emit("UpdateBitDisplay",u.resultBitDisplay),u.OldBitDisplay=[])}catch(e){console.log(e)}}}catch(e){console.log(e)}}async getData(){return u.resultBitDisplay}async insertBitDisplay(e){try{e._id="a"+Math.random().toString(36),e.status=0;const t=this.bitDisplayRepository.create(e);return await this.bitDisplayRepository.save(t),u.refreshDataBitDisplay=!0,{result:"success",message:"Add BitDisplay Success",data:{}}}catch(e){return console.log(e),{result:"error",data:{},message:e.message}}}async updateBitDisplay(e){try{return await this.bitDisplayRepository.update(e._id,e),u.refreshDataBitDisplay=!0,{result:"success",message:"Update BitDisplay Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}async deleteBitDisplay(e){try{return await this.bitDisplayRepository.delete(e),u.refreshDataBitDisplay=!0,{result:"success",message:"Delete BitDisplay Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.ScadaBitDisplayService=p,t.ScadaBitDisplayService=p=a([(0,n.Injectable)(),i(0,(0,o.InjectRepository)(c.BitDisplayEntity)),s("design:paramtypes",[l.Repository,d.SocketGateway])],p)},3336:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaDWordAdjustRefreshService=void 0;const i=r(3563),n=r(7247),o=r(6277);let l=class{constructor(e){this.socketGateway=e}refreshData(){let e=!1;if(Array.isArray(o.haveChangeArrDWordAdjust))for(let t=0;t<o.haveChangeArrDWordAdjust.length;t++)if(o.haveChangeArrDWordAdjust[t]){if(e=!1,o.haveChangeArrDWordAdjust[t]=!1,Array.isArray(o.resultDWordAdjust))for(let r=0;r<o.resultDWordAdjust.length;r++)"0"===o.resultDWordAdjust[r].idDevice&&0==t?Array.isArray(o.DWordAdjust[0])&&o.DWordAdjust[0]&&o.resultDWordAdjust[r].tag<=o.DWordAdjust[0].length&&(parseInt(o.resultDWordAdjust[r].negative)&&parseInt(o.DWordAdjust[0][o.resultDWordAdjust[r].tag])>2147483647?o.resultDWordAdjust[r].text=parseInt(o.DWordAdjust[0][o.resultDWordAdjust[r].tag])-4294967296:o.resultDWordAdjust[r].text=o.DWordAdjust[0][o.resultDWordAdjust[r].tag],e=!0):parseInt(o.resultDWordAdjust[r].idDevice)&&t>0&&o.DWordAdjust[parseInt(o.resultDWordAdjust[r].idDevice)]&&o.resultDWordAdjust[r].tag<=o.DWordAdjust[parseInt(o.resultDWordAdjust[r].idDevice)].length&&(parseInt(o.resultDWordAdjust[r].negative)&&parseInt(o.DWordAdjust[parseInt(o.resultDWordAdjust[r].idDevice)][o.resultDWordAdjust[r].tag])>2147483647?o.resultDWordAdjust[r].text=parseInt(o.DWordAdjust[parseInt(o.resultDWordAdjust[r].idDevice)][o.resultDWordAdjust[r].tag])-4294967296:o.resultDWordAdjust[r].text=o.DWordAdjust[parseInt(o.resultDWordAdjust[r].idDevice)][o.resultDWordAdjust[r].tag],e=!0);if(e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateDWordAdjust",o.resultDWordAdjust),e=!1,Array.isArray(o.resultProjectScreen_DWordAdjust))for(let t=0;t<o.resultProjectScreen_DWordAdjust.length;t++)o.resultProjectScreen_DWordAdjust[t].idDevice&&o.DWordAdjust[parseInt(o.resultProjectScreen_DWordAdjust[t].idDevice)]&&o.resultProjectScreen_DWordAdjust[t].tag<=o.DWordAdjust[parseInt(o.resultProjectScreen_DWordAdjust[t].idDevice)].length&&(parseInt(o.resultProjectScreen_DWordAdjust[t].negative)&&parseInt(o.DWordAdjust[parseInt(o.resultProjectScreen_DWordAdjust[t].idDevice)][o.resultProjectScreen_DWordAdjust[t].tag])>2147483647?o.resultProjectScreen_DWordAdjust[t].text=parseInt(o.DWordAdjust[parseInt(o.resultProjectScreen_DWordAdjust[t].idDevice)][o.resultProjectScreen_DWordAdjust[t].tag])-4294967296:o.resultProjectScreen_DWordAdjust[t].text=o.DWordAdjust[parseInt(o.resultProjectScreen_DWordAdjust[t].idDevice)][o.resultProjectScreen_DWordAdjust[t].tag],e=!0);e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateScreen_DWordAdjust",o.resultProjectScreen_DWordAdjust)}}};t.ScadaDWordAdjustRefreshService=l,t.ScadaDWordAdjustRefreshService=l=a([(0,i.Injectable)(),s("design:paramtypes",[n.SocketGateway])],l)},4529:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaDWordAdjustController=void 0;const n=r(3563),o=r(4354);let l=class{constructor(e){this.scadaDWordAdjustService=e}getData(){return this.scadaDWordAdjustService.getData()}insertDWordAdjust(e){return this.scadaDWordAdjustService.insertDWordAdjust(e)}updateDWordAdjust(e){return this.scadaDWordAdjustService.updateDWordAdjust(e)}deleteDWordAdjust(e){return this.scadaDWordAdjustService.deleteDWordAdjust(e)}};t.ScadaDWordAdjustController=l,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getData",null),a([(0,n.Post)("/insert_dwordAdjust"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"insertDWordAdjust",null),a([(0,n.Put)("/update_dwordAdjust"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"updateDWordAdjust",null),a([(0,n.Delete)("/delete_dwordAdjust"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"deleteDWordAdjust",null),t.ScadaDWordAdjustController=l=a([(0,n.Controller)("dwordAdjust"),s("design:paramtypes",[o.ScadaDWordAdjustService])],l)},602:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.DWordAdjustEntity=void 0;const i=r(3132);let n=class{};t.DWordAdjustEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"parent",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"tag",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"text",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"left",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"top",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"width",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"height",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"fontSize",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"idGroupControl",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"idDevice",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"typeDevice",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"levelUser",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"divide",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"unit",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"colorText",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"colorBackground",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"negative",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"enableLogData",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"zIndex",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"borderRadius",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"cssCode",void 0),t.DWordAdjustEntity=n=a([(0,i.Entity)("DWordAdjust")],n)},6881:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaDWordAdjustModule=void 0;const s=r(3563),i=r(4529),n=r(4354),o=r(2449),l=r(9522),c=r(602);let d=class{};t.ScadaDWordAdjustModule=d,t.ScadaDWordAdjustModule=d=a([(0,s.Module)({imports:[l.TypeOrmModule.forFeature([c.DWordAdjustEntity]),o.SocketIoModule],controllers:[i.ScadaDWordAdjustController],providers:[n.ScadaDWordAdjustService]})],d)},4354:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaDWordAdjustService=void 0;const n=r(3563),o=r(9522),l=r(3132),c=r(602),d=r(7247),u=r(6277);let p=class{constructor(e,t){this.dwordAdjustRepository=e,this.socketGateway=t}onModuleInit(){this.setupDataRefreshInterval()}setupDataRefreshInterval(){this.intervalId||(this.intervalId=setInterval((async()=>{await this.fetchDataAndUpdate()}),500))}async fetchDataAndUpdate(){try{if(u.refreshDataDWordAdjust){u.refreshDataDWordAdjust=!1;try{u.resultDWordAdjust=await this.dwordAdjustRepository.find(),this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateDWordAdjust",u.resultDWordAdjust),u.OldDWordAdjust=[]}catch(e){console.log(e)}}}catch(e){console.log(e)}}async getData(){return u.resultDWordAdjust}async insertDWordAdjust(e){try{e._id="a"+Math.random().toString(36),e.text=0;const t=this.dwordAdjustRepository.create(e);return await this.dwordAdjustRepository.save(t),u.refreshDataDWordAdjust=!0,{result:"success",message:"Add DWordAdjust Success",data:{}}}catch(e){return console.log(e),{result:"error",data:{},message:e.message}}}async updateDWordAdjust(e){try{return await this.dwordAdjustRepository.update(e._id,e),u.refreshDataDWordAdjust=!0,{result:"success",message:"Update DWordAdjust Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}async deleteDWordAdjust(e){try{return await this.dwordAdjustRepository.delete(e),u.refreshDataDWordAdjust=!0,{result:"success",message:"Delete DWordAdjust Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.ScadaDWordAdjustService=p,t.ScadaDWordAdjustService=p=a([(0,n.Injectable)(),i(0,(0,o.InjectRepository)(c.DWordAdjustEntity)),s("design:paramtypes",[l.Repository,d.SocketGateway])],p)},8792:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaDWordDisplayRefreshService=void 0;const i=r(3563),n=r(7247),o=r(6277);let l=class{constructor(e){this.socketGateway=e}refreshData(){let e=!1;if(Array.isArray(o.haveChangeArrDWordDisplay))for(let t=0;t<o.haveChangeArrDWordDisplay.length;t++)if(o.haveChangeArrDWordDisplay[t]){if(e=!1,o.haveChangeArrDWordDisplay[t]=!1,Array.isArray(o.resultDWordDisplay))for(let r=0;r<o.resultDWordDisplay.length;r++)"0"===o.resultDWordDisplay[r].idDevice&&0==t?Array.isArray(o.DWordDisplay[0])&&o.DWordDisplay[0]&&o.resultDWordDisplay[r].tag<=o.DWordDisplay[0].length&&(parseInt(o.resultDWordDisplay[r].negative)&&parseInt(o.DWordDisplay[0][o.resultDWordDisplay[r].tag])>2147483647?o.resultDWordDisplay[r].text=parseInt(o.DWordDisplay[0][o.resultDWordDisplay[r].tag])-4294967296:o.resultDWordDisplay[r].text=o.DWordDisplay[0][o.resultDWordDisplay[r].tag],e=!0):parseInt(o.resultDWordDisplay[r].idDevice)&&t>0&&o.DWordDisplay[parseInt(o.resultDWordDisplay[r].idDevice)]&&o.resultDWordDisplay[r].tag<=o.DWordDisplay[parseInt(o.resultDWordDisplay[r].idDevice)].length&&(parseInt(o.resultDWordDisplay[r].negative)&&parseInt(o.DWordDisplay[parseInt(o.resultDWordDisplay[r].idDevice)][o.resultDWordDisplay[r].tag])>2147483647?o.resultDWordDisplay[r].text=parseInt(o.DWordDisplay[parseInt(o.resultDWordDisplay[r].idDevice)][o.resultDWordDisplay[r].tag])-4294967296:o.resultDWordDisplay[r].text=o.DWordDisplay[parseInt(o.resultDWordDisplay[r].idDevice)][o.resultDWordDisplay[r].tag],e=!0);if(e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateDWordDisplay",o.resultDWordDisplay),e=!1,Array.isArray(o.resultProjectScreen_DWordDisplay))for(let t=0;t<o.resultProjectScreen_DWordDisplay.length;t++)o.resultProjectScreen_DWordDisplay[t].idDevice&&o.DWordDisplay[parseInt(o.resultProjectScreen_DWordDisplay[t].idDevice)]&&o.resultProjectScreen_DWordDisplay[t].tag<=o.DWordDisplay[parseInt(o.resultProjectScreen_DWordDisplay[t].idDevice)].length&&(parseInt(o.resultProjectScreen_DWordDisplay[t].negative)&&parseInt(o.DWordDisplay[parseInt(o.resultProjectScreen_DWordDisplay[t].idDevice)][o.resultProjectScreen_DWordDisplay[t].tag])>2147483647?o.resultProjectScreen_DWordDisplay[t].text=parseInt(o.DWordDisplay[parseInt(o.resultProjectScreen_DWordDisplay[t].idDevice)][o.resultProjectScreen_DWordDisplay[t].tag])-4294967296:o.resultProjectScreen_DWordDisplay[t].text=o.DWordDisplay[parseInt(o.resultProjectScreen_DWordDisplay[t].idDevice)][o.resultProjectScreen_DWordDisplay[t].tag],e=!0);e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateScreen_DWordDisplay",o.resultProjectScreen_DWordDisplay)}}};t.ScadaDWordDisplayRefreshService=l,t.ScadaDWordDisplayRefreshService=l=a([(0,i.Injectable)(),s("design:paramtypes",[n.SocketGateway])],l)},4785:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaDWordDisplayController=void 0;const n=r(3563),o=r(3202);let l=class{constructor(e){this.scadaDWordDisplayService=e}getData(){return this.scadaDWordDisplayService.getData()}insertDWordDisplay(e){return this.scadaDWordDisplayService.insertDWordDisplay(e)}updateDWordDisplay(e){return this.scadaDWordDisplayService.updateDWordDisplay(e)}deleteDWordDisplay(e){return this.scadaDWordDisplayService.deleteDWordDisplay(e)}};t.ScadaDWordDisplayController=l,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getData",null),a([(0,n.Post)("/insert_dwordDisplay"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"insertDWordDisplay",null),a([(0,n.Put)("/update_dwordDisplay"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"updateDWordDisplay",null),a([(0,n.Delete)("/delete_dwordDisplay"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"deleteDWordDisplay",null),t.ScadaDWordDisplayController=l=a([(0,n.Controller)("dwordDisplay"),s("design:paramtypes",[o.ScadaDWordDisplayService])],l)},938:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.DWordDisplayEntity=void 0;const i=r(3132);let n=class{};t.DWordDisplayEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"parent",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"tag",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"text",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"left",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"top",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"width",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"height",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"fontSize",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"divide",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"idGroupControl",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"idDevice",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"unit",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"colorText",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"colorBackground",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"negative",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"zIndex",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"borderRadius",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"cssCode",void 0),t.DWordDisplayEntity=n=a([(0,i.Entity)("DWordDisplay")],n)},1937:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaDWordDisplayModule=void 0;const s=r(3563),i=r(4785),n=r(3202),o=r(2449),l=r(9522),c=r(938);let d=class{};t.ScadaDWordDisplayModule=d,t.ScadaDWordDisplayModule=d=a([(0,s.Module)({imports:[l.TypeOrmModule.forFeature([c.DWordDisplayEntity]),o.SocketIoModule],controllers:[i.ScadaDWordDisplayController],providers:[n.ScadaDWordDisplayService]})],d)},3202:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaDWordDisplayService=void 0;const n=r(3563),o=r(9522),l=r(3132),c=r(938),d=r(7247),u=r(6277);let p=class{constructor(e,t){this.dwordDisplayRepository=e,this.socketGateway=t}onModuleInit(){this.setupDataRefreshInterval()}setupDataRefreshInterval(){this.intervalId||(this.intervalId=setInterval((async()=>{await this.fetchDataAndUpdate()}),500))}async fetchDataAndUpdate(){try{if(u.refreshDataDWordDisplay){u.refreshDataDWordDisplay=!1;try{u.resultDWordDisplay=await this.dwordDisplayRepository.find(),this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateDWordDisplay",u.resultDWordDisplay),u.OldDWordDisplay=[]}catch(e){console.log(e)}}}catch(e){console.log(e)}}async getData(){return u.resultDWordDisplay}async insertDWordDisplay(e){try{e._id="a"+Math.random().toString(36),e.text=0;const t=this.dwordDisplayRepository.create(e);return await this.dwordDisplayRepository.save(t),u.refreshDataDWordDisplay=!0,{result:"success",message:"Add DWordDisplay Success",data:{}}}catch(e){return console.log(e),{result:"error",data:{},message:e.message}}}async updateDWordDisplay(e){try{return await this.dwordDisplayRepository.update(e._id,e),u.refreshDataDWordDisplay=!0,{result:"success",message:"Update DWordDisplay Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}async deleteDWordDisplay(e){try{return await this.dwordDisplayRepository.delete(e),u.refreshDataDWordDisplay=!0,{result:"success",message:"Delete DWordDisplay Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.ScadaDWordDisplayService=p,t.ScadaDWordDisplayService=p=a([(0,n.Injectable)(),i(0,(0,o.InjectRepository)(c.DWordDisplayEntity)),s("design:paramtypes",[l.Repository,d.SocketGateway])],p)},7725:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaElementImageLibraryController=void 0;const n=r(3563),o=r(1702);let l=class{constructor(e){this.scadaElementImageLibraryService=e}getData(){return this.scadaElementImageLibraryService.getData()}upload(e){return this.scadaElementImageLibraryService.upload(e)}delete(e){return this.scadaElementImageLibraryService.delete(e)}};t.ScadaElementImageLibraryController=l,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getData",null),a([(0,n.Post)("/upload"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"upload",null),a([(0,n.Delete)("/delete"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"delete",null),t.ScadaElementImageLibraryController=l=a([(0,n.Controller)("uploadImageElement"),s("design:paramtypes",[o.ScadaElementImageLibraryService])],l)},8110:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ElementImageLibraryEntity=void 0;const i=r(3132);let n=class{};t.ElementImageLibraryEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)(),s("design:type",String)],n.prototype,"name",void 0),a([(0,i.Column)(),s("design:type",String)],n.prototype,"img",void 0),t.ElementImageLibraryEntity=n=a([(0,i.Entity)("ElementImageLibrary")],n)},1845:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaElementImageLibraryModule=void 0;const s=r(3563),i=r(2449),n=r(9522),o=r(8110),l=r(7725),c=r(1702);let d=class{};t.ScadaElementImageLibraryModule=d,t.ScadaElementImageLibraryModule=d=a([(0,s.Module)({imports:[n.TypeOrmModule.forFeature([o.ElementImageLibraryEntity]),i.SocketIoModule],controllers:[l.ScadaElementImageLibraryController],providers:[c.ScadaElementImageLibraryService]})],d)},1702:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaElementImageLibraryService=void 0;const n=r(3563),o=r(9522),l=r(3132),c=r(7247),d=r(8110),u=r(6277);let p=class{constructor(e,t){this.bitDisplayImageLibraryRepository=e,this.socketGateway=t}onModuleInit(){this.setupDataRefreshInterval()}setupDataRefreshInterval(){this.intervalId||(this.intervalId=setInterval((async()=>{await this.fetchDataAndUpdate()}),500))}async fetchDataAndUpdate(){try{if(u.refreshDataElementImageLibrary){u.refreshDataElementImageLibrary=!1;try{u.resultElementImageLibrary=await this.bitDisplayImageLibraryRepository.find(),this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateElementImageLibrary",u.resultElementImageLibrary)}catch(e){console.log(e)}}}catch(e){console.log(e)}}async getData(){return u.resultElementImageLibrary}async upload(e){try{if(3!==e.data.match(/^data:([A-Za-z-+\/]+);base64,(.+)$/).length)return{result:"error",data:{},message:"Invalid input string"};let t={_id:"a"+Math.random().toString(36),name:e.name,img:e.data};const r=this.bitDisplayImageLibraryRepository.create(t);return await this.bitDisplayImageLibraryRepository.save(r),u.refreshDataElementImageLibrary=!0,{result:"success",message:"Add Element Image Library Success",data:{}}}catch(e){return console.log(e),{result:"error",data:{},message:e.message}}}async delete(e){try{return await this.bitDisplayImageLibraryRepository.delete(e),u.refreshDataElementImageLibrary=!0,{result:"success",message:"Delete Element Image Library Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.ScadaElementImageLibraryService=p,t.ScadaElementImageLibraryService=p=a([(0,n.Injectable)(),i(0,(0,o.InjectRepository)(d.ElementImageLibraryEntity)),s("design:paramtypes",[l.Repository,c.SocketGateway])],p)},9940:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaElementRefreshService=void 0;const i=r(3563),n=r(7247),o=r(6277);let l=class{constructor(e){this.socketGateway=e}refreshData(){let e=!1;try{if(Array.isArray(o.haveChangeArrElement))for(let t=0;t<o.haveChangeArrElement.length;t++)if(o.haveChangeArrElement[t]){e=!1,o.haveChangeArrElement[t]=!1;for(let t=0;t<o.resultElementWord.length;t++)o.resultElementWord[t].idDevice&&o.Element[parseInt(o.resultElementWord[t].idDevice)]&&o.resultElementWord[t].indexElement<=o.Element[parseInt(o.resultElementWord[t].idDevice)].length&&(o.resultElementWord[t].status=o.Element[parseInt(o.resultElementWord[t].idDevice)][o.resultElementWord[t].indexElement],e=!0);if(e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateElementWord",o.resultElementWord),e=!1,Array.isArray(o.resultLine))for(let t=0;t<o.resultLine.length;t++)"Element"==o.resultLine[t].typeTag&&!isNaN(o.resultLine[t].idDevice)&&o.Element[parseInt(o.resultLine[t].idDevice)]&&parseInt(o.resultLine[t].tag)<=o.Element[parseInt(o.resultLine[t].idDevice)].length&&(0|parseInt(o.Element[parseInt(o.resultLine[t].idDevice)][o.resultLine[t].tag])?(o.resultLine[t].status=1,e=!0):(o.resultLine[t].status=0,e=!0));e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateLine",o.resultLine)}}catch(e){console.log(e)}}};t.ScadaElementRefreshService=l,t.ScadaElementRefreshService=l=a([(0,i.Injectable)(),s("design:paramtypes",[n.SocketGateway])],l)},2421:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaElementController=void 0;const n=r(3563),o=r(7598);let l=class{constructor(e){this.scadaElementService=e}getData(){return this.scadaElementService.getData()}insertElement(e){return this.scadaElementService.insertElement(e)}updateElement(e){return this.scadaElementService.updateElement(e)}deleteElement(e){return this.scadaElementService.deleteElement(e)}};t.ScadaElementController=l,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getData",null),a([(0,n.Post)("/insert_Element"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"insertElement",null),a([(0,n.Put)("/update_Element"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"updateElement",null),a([(0,n.Delete)("/delete_Element"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"deleteElement",null),t.ScadaElementController=l=a([(0,n.Controller)("Element"),s("design:paramtypes",[o.ScadaElementService])],l)},3350:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ElementEntity=void 0;const i=r(3132);let n=class{};t.ElementEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"parent",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"tagBit",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"tagOn",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"tagOff",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"tagFault",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"notOn",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"notOff",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"left",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"top",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"nameElement",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"status",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"width",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"height",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"src_R",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"src_S",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"src_N",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"src_F",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"rotate",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"idDevice",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"typeDevice",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"enableLogData",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"levelUser",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"zIndex",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"cssCode",void 0),t.ElementEntity=n=a([(0,i.Entity)("Element")],n)},2589:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaElementModule=void 0;const s=r(3563),i=r(2421),n=r(7598),o=r(2449),l=r(9522),c=r(3350);let d=class{};t.ScadaElementModule=d,t.ScadaElementModule=d=a([(0,s.Module)({imports:[l.TypeOrmModule.forFeature([c.ElementEntity]),o.SocketIoModule],controllers:[i.ScadaElementController],providers:[n.ScadaElementService]})],d)},7598:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaElementService=void 0;const n=r(3563),o=r(9522),l=r(3132),c=r(3350),d=r(7247),u=r(6277);let p=class{constructor(e,t){this.ElementRepository=e,this.socketGateway=t}onModuleInit(){this.setupDataRefreshInterval()}setupDataRefreshInterval(){this.intervalId||(this.intervalId=setInterval((async()=>{await this.fetchDataAndUpdate()}),500))}async fetchDataAndUpdate(){try{if(u.refreshDataElement){u.refreshDataElement=!1;try{u.resultElement=await this.ElementRepository.find(),this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateElement",u.resultElement),u.OldBitAdjust=[],u.OldBitDisplay=[]}catch(e){console.log(e)}}}catch(e){console.log(e)}}async getData(){return u.resultElement}async insertElement(e){try{e._id="a"+Math.random().toString(36),e.status=0;const t=this.ElementRepository.create(e);return await this.ElementRepository.save(t),u.refreshDataElement=!0,{result:"success",message:"Add Element Success",data:{}}}catch(e){return console.log(e),{result:"error",data:{},message:e.message}}}async updateElement(e){try{return await this.ElementRepository.update(e._id,e),u.refreshDataElement=!0,{result:"success",message:"Update Element Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}async deleteElement(e){try{return await this.ElementRepository.delete(e),u.refreshDataElement=!0,{result:"success",message:"Delete Element Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.ScadaElementService=p,t.ScadaElementService=p=a([(0,n.Injectable)(),i(0,(0,o.InjectRepository)(c.ElementEntity)),s("design:paramtypes",[l.Repository,d.SocketGateway])],p)},2119:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaIconImageLibraryController=void 0;const n=r(3563),o=r(3500);let l=class{constructor(e){this.scadaIconImageLibraryService=e}getData(){return this.scadaIconImageLibraryService.getData()}upload(e){return this.scadaIconImageLibraryService.upload(e)}update(e){return this.scadaIconImageLibraryService.update(e)}delete(e){return this.scadaIconImageLibraryService.delete(e)}};t.ScadaIconImageLibraryController=l,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getData",null),a([(0,n.Post)("/upload"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"upload",null),a([(0,n.Put)("/update"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"update",null),a([(0,n.Delete)("/delete"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"delete",null),t.ScadaIconImageLibraryController=l=a([(0,n.Controller)("uploadImageIcon"),s("design:paramtypes",[o.ScadaIconImageLibraryService])],l)},6324:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.IconImageLibraryEntity=void 0;const i=r(3132);let n=class{};t.IconImageLibraryEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)(),s("design:type",String)],n.prototype,"name",void 0),a([(0,i.Column)(),s("design:type",String)],n.prototype,"img",void 0),a([(0,i.Column)({nullable:!0,default:0}),s("design:type",Number)],n.prototype,"enable",void 0),a([(0,i.Column)({nullable:!0,default:0}),s("design:type",Number)],n.prototype,"width",void 0),a([(0,i.Column)({nullable:!0,default:0}),s("design:type",Number)],n.prototype,"height",void 0),t.IconImageLibraryEntity=n=a([(0,i.Entity)("IconImageLibrary")],n)},979:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaIconImageLibraryModule=void 0;const s=r(3563),i=r(2449),n=r(9522),o=r(6324),l=r(2119),c=r(3500);let d=class{};t.ScadaIconImageLibraryModule=d,t.ScadaIconImageLibraryModule=d=a([(0,s.Module)({imports:[n.TypeOrmModule.forFeature([o.IconImageLibraryEntity]),i.SocketIoModule],controllers:[l.ScadaIconImageLibraryController],providers:[c.ScadaIconImageLibraryService]})],d)},3500:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaIconImageLibraryService=void 0;const n=r(3563),o=r(9522),l=r(3132),c=r(7247),d=r(6324),u=r(6277);let p=class{constructor(e,t){this.bitDisplayImageLibraryRepository=e,this.socketGateway=t}onModuleInit(){this.setupDataRefreshInterval()}setupDataRefreshInterval(){this.intervalId||(this.intervalId=setInterval((async()=>{await this.fetchDataAndUpdate()}),500))}async fetchDataAndUpdate(){try{if(u.refreshDataIconImageLibrary){u.refreshDataIconImageLibrary=!1;try{u.resultIconImageLibrary=await this.bitDisplayImageLibraryRepository.find(),this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateIconImageLibrary",u.resultIconImageLibrary)}catch(e){console.log(e)}}}catch(e){console.log(e)}}async getData(){return u.resultIconImageLibrary}async upload(e){try{if(3!==e.data.match(/^data:([A-Za-z-+\/]+);base64,(.+)$/).length)return{result:"error",data:{},message:"Invalid input string"};let t={_id:"a"+Math.random().toString(36),name:e.name,img:e.data,enable:e.enable,width:e.width,height:e.height};const r=this.bitDisplayImageLibraryRepository.create(t);return await this.bitDisplayImageLibraryRepository.save(r),u.refreshDataIconImageLibrary=!0,{result:"success",message:"Add Icon Image Library Success",data:{}}}catch(e){return console.log(e),{result:"error",data:{},message:e.message}}}async delete(e){try{return await this.bitDisplayImageLibraryRepository.delete(e),u.refreshDataIconImageLibrary=!0,{result:"success",message:"Delete Icon Image Library Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}async update(e){try{return await this.bitDisplayImageLibraryRepository.update(e._id,e),u.refreshDataIconImageLibrary=!0,{result:"success",message:"Update Icon Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.ScadaIconImageLibraryService=p,t.ScadaIconImageLibraryService=p=a([(0,n.Injectable)(),i(0,(0,o.InjectRepository)(d.IconImageLibraryEntity)),s("design:paramtypes",[l.Repository,c.SocketGateway])],p)},8157:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaLabelController=void 0;const n=r(3563),o=r(262);let l=class{constructor(e){this.scadaLabelService=e}getData(){return this.scadaLabelService.getData()}insertLabel(e){return this.scadaLabelService.insertLabel(e)}updateLabel(e){return this.scadaLabelService.updateLabel(e)}deleteLabel(e){return this.scadaLabelService.deleteLabel(e)}};t.ScadaLabelController=l,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getData",null),a([(0,n.Post)("/insert_label"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"insertLabel",null),a([(0,n.Put)("/update_label"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"updateLabel",null),a([(0,n.Delete)("/delete_label"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"deleteLabel",null),t.ScadaLabelController=l=a([(0,n.Controller)("label"),s("design:paramtypes",[o.ScadaLabelService])],l)},7470:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.LabelEntity=void 0;const i=r(3132);let n=class{};t.LabelEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"parent",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"idGroupControl",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"left",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"top",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"width",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"text",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"color",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"fontSize",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"idScreen",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"cssCode",void 0),t.LabelEntity=n=a([(0,i.Entity)("Label")],n)},1205:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaLabelModule=void 0;const s=r(3563),i=r(8157),n=r(262),o=r(2449),l=r(9522),c=r(7470);let d=class{};t.ScadaLabelModule=d,t.ScadaLabelModule=d=a([(0,s.Module)({imports:[l.TypeOrmModule.forFeature([c.LabelEntity]),o.SocketIoModule],controllers:[i.ScadaLabelController],providers:[n.ScadaLabelService]})],d)},262:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaLabelService=void 0;const n=r(3563),o=r(9522),l=r(3132),c=r(7470),d=r(7247),u=r(6277);let p=class{constructor(e,t){this.labelRepository=e,this.socketGateway=t}onModuleInit(){this.setupDataRefreshInterval()}setupDataRefreshInterval(){this.intervalId||(this.intervalId=setInterval((async()=>{await this.fetchDataAndUpdate()}),500))}async fetchDataAndUpdate(){try{if(u.refreshDataLabel){u.refreshDataLabel=!1;try{u.resultlabel=await this.labelRepository.find(),this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateLabel",u.resultlabel)}catch(e){console.log(e)}}}catch(e){console.log(e)}}async getData(){return u.resultlabel}async insertLabel(e){try{e._id="a"+Math.random().toString(36);const t=this.labelRepository.create(e);return await this.labelRepository.save(t),u.refreshDataLabel=!0,{result:"success",message:"Add Label Success",data:{}}}catch(e){return console.log(e),{result:"error",data:{},message:e.message}}}async updateLabel(e){try{return await this.labelRepository.update(e._id,e),u.refreshDataLabel=!0,{result:"success",message:"Update Label Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}async deleteLabel(e){try{return await this.labelRepository.delete(e),u.refreshDataLabel=!0,{result:"success",message:"Delete Label Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.ScadaLabelService=p,t.ScadaLabelService=p=a([(0,n.Injectable)(),i(0,(0,o.InjectRepository)(c.LabelEntity)),s("design:paramtypes",[l.Repository,d.SocketGateway])],p)},9485:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaLineController=void 0;const n=r(3563),o=r(1974);let l=class{constructor(e){this.scadaLineService=e}getData(){return this.scadaLineService.getData()}insertLine(e){return this.scadaLineService.insertLine(e)}updateLine(e){return this.scadaLineService.updateLine(e)}deleteLine(e){return this.scadaLineService.deleteLine(e)}};t.ScadaLineController=l,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getData",null),a([(0,n.Post)("/insert_line"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"insertLine",null),a([(0,n.Put)("/update_line"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"updateLine",null),a([(0,n.Delete)("/delete_line"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"deleteLine",null),t.ScadaLineController=l=a([(0,n.Controller)("line"),s("design:paramtypes",[o.ScadaLineService])],l)},1374:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.LineEntity=void 0;const i=r(3132);let n=class{};t.LineEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"parent",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"left",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"top",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"width",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"length",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"colorOff",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"colorOn",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"orientation",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"rotate",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"tag",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"typeTag",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"status",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"idDevice",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"zIndex",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"cssCode",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"cssCode_On",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"cssCode_Off",void 0),t.LineEntity=n=a([(0,i.Entity)("Line")],n)},1717:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaLineModule=void 0;const s=r(3563),i=r(9485),n=r(1974),o=r(2449),l=r(9522),c=r(1374);let d=class{};t.ScadaLineModule=d,t.ScadaLineModule=d=a([(0,s.Module)({imports:[l.TypeOrmModule.forFeature([c.LineEntity]),o.SocketIoModule],controllers:[i.ScadaLineController],providers:[n.ScadaLineService]})],d)},1974:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaLineService=void 0;const n=r(3563),o=r(9522),l=r(3132),c=r(1374),d=r(7247),u=r(6277);let p=class{constructor(e,t){this.lineRepository=e,this.socketGateway=t}onModuleInit(){this.setupDataRefreshInterval()}setupDataRefreshInterval(){this.intervalId||(this.intervalId=setInterval((async()=>{await this.fetchDataAndUpdate()}),500))}async fetchDataAndUpdate(){try{if(u.refreshDataLine){u.refreshDataLine=!1;try{u.resultLine=await this.lineRepository.find(),this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateLine",u.resultLine),u.OldBitAdjust=[],u.OldBitDisplay=[],u.OldElement=[]}catch(e){console.log(e)}}}catch(e){console.log(e)}}async getData(){return u.resultLine}async insertLine(e){try{e._id="a"+Math.random().toString(36),e.status=0;const t=this.lineRepository.create(e);return await this.lineRepository.save(t),u.refreshDataLine=!0,{result:"success",message:"Add Line Success",data:{}}}catch(e){return console.log(e),{result:"error",data:{},message:e.message}}}async updateLine(e){try{return await this.lineRepository.update(e._id,e),u.refreshDataLine=!0,{result:"success",message:"Update Line Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}async deleteLine(e){try{return await this.lineRepository.delete(e),u.refreshDataLine=!0,{result:"success",message:"Delete Line Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.ScadaLineService=p,t.ScadaLineService=p=a([(0,n.Injectable)(),i(0,(0,o.InjectRepository)(c.LineEntity)),s("design:paramtypes",[l.Repository,d.SocketGateway])],p)},2761:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaMapImageLibraryController=void 0;const n=r(3563),o=r(5546);let l=class{constructor(e){this.scadaMapImageLibraryService=e}getData(){return this.scadaMapImageLibraryService.getData()}upload(e){return this.scadaMapImageLibraryService.upload(e)}delete(e){return this.scadaMapImageLibraryService.delete(e)}};t.ScadaMapImageLibraryController=l,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getData",null),a([(0,n.Post)("/upload"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"upload",null),a([(0,n.Delete)("/delete"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"delete",null),t.ScadaMapImageLibraryController=l=a([(0,n.Controller)("uploadMap"),s("design:paramtypes",[o.ScadaMapImageLibraryService])],l)},274:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.MapImageLibraryEntity=void 0;const i=r(3132);let n=class{};t.MapImageLibraryEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)(),s("design:type",String)],n.prototype,"name",void 0),a([(0,i.Column)(),s("design:type",String)],n.prototype,"img",void 0),t.MapImageLibraryEntity=n=a([(0,i.Entity)("MapImageLibrary")],n)},1129:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaMapImageLibraryModule=void 0;const s=r(3563),i=r(2449),n=r(9522),o=r(274),l=r(2761),c=r(5546);let d=class{};t.ScadaMapImageLibraryModule=d,t.ScadaMapImageLibraryModule=d=a([(0,s.Module)({imports:[n.TypeOrmModule.forFeature([o.MapImageLibraryEntity]),i.SocketIoModule],controllers:[l.ScadaMapImageLibraryController],providers:[c.ScadaMapImageLibraryService]})],d)},5546:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaMapImageLibraryService=void 0;const n=r(3563),o=r(9522),l=r(3132),c=r(7247),d=r(274),u=r(6277);let p=class{constructor(e,t){this.bitDisplayImageLibraryRepository=e,this.socketGateway=t}onModuleInit(){this.setupDataRefreshInterval()}setupDataRefreshInterval(){this.intervalId||(this.intervalId=setInterval((async()=>{await this.fetchDataAndUpdate()}),500))}async fetchDataAndUpdate(){try{if(u.refreshDataMapImageLibrary){u.refreshDataMapImageLibrary=!1;try{u.resultMapImageLibrary=await this.bitDisplayImageLibraryRepository.find(),this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateMapImageLibrary",u.resultMapImageLibrary)}catch(e){console.log(e)}}}catch(e){console.log(e)}}async getData(){return u.resultMapImageLibrary}async upload(e){try{if(3!==e.data.match(/^data:([A-Za-z-+\/]+);base64,(.+)$/).length)return{result:"error",data:{},message:"Invalid input string"};let t={_id:"a"+Math.random().toString(36),name:e.name,img:e.data};const r=this.bitDisplayImageLibraryRepository.create(t);return await this.bitDisplayImageLibraryRepository.save(r),u.refreshDataMapImageLibrary=!0,{result:"success",message:"Add Map Image Library Success",data:{}}}catch(e){return console.log(e),{result:"error",data:{},message:e.message}}}async delete(e){try{return await this.bitDisplayImageLibraryRepository.delete(e),u.refreshDataMapImageLibrary=!0,{result:"success",message:"Delete Map Image Library Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.ScadaMapImageLibraryService=p,t.ScadaMapImageLibraryService=p=a([(0,n.Injectable)(),i(0,(0,o.InjectRepository)(d.MapImageLibraryEntity)),s("design:paramtypes",[l.Repository,c.SocketGateway])],p)},13:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaMapController=void 0;const n=r(3563),o=r(9110),l=r(456);let c=class{constructor(e){this.scadaMapService=e}getData(){return this.scadaMapService.getData()}getPosition(){return l.PositionMobileRobot}insertMap(e){return this.scadaMapService.insertMap(e)}updateMap(e){return this.scadaMapService.updateMap(e)}deleteMap(e){return this.scadaMapService.deleteMap(e)}};t.ScadaMapController=c,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],c.prototype,"getData",null),a([(0,n.Get)("/getposition"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],c.prototype,"getPosition",null),a([(0,n.Post)("/insert_map"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],c.prototype,"insertMap",null),a([(0,n.Put)("/update_map"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],c.prototype,"updateMap",null),a([(0,n.Delete)("/delete_map"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],c.prototype,"deleteMap",null),t.ScadaMapController=c=a([(0,n.Controller)("map"),s("design:paramtypes",[o.ScadaMapService])],c)},9310:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.MapEntity=void 0;const i=r(3132);let n=class{};t.MapEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"parent",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"idGroupControl",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"left",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"top",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"width",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"height",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"selectPoint",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"image1X",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"image1Y",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"image2X",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"image2Y",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"map1X",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"map1Y",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"map2X",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"map2Y",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"nameImage",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"indexMobileRobot",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"cssCode",void 0),t.MapEntity=n=a([(0,i.Entity)("Map")],n)},677:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaMapModule=void 0;const s=r(3563),i=r(13),n=r(9110),o=r(2449),l=r(9522),c=r(9310);let d=class{};t.ScadaMapModule=d,t.ScadaMapModule=d=a([(0,s.Module)({imports:[l.TypeOrmModule.forFeature([c.MapEntity]),o.SocketIoModule],controllers:[i.ScadaMapController],providers:[n.ScadaMapService]})],d)},9110:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaMapService=void 0;const n=r(3563),o=r(9522),l=r(3132),c=r(9310),d=r(7247),u=r(6277);let p=class{constructor(e,t){this.mapRepository=e,this.socketGateway=t}onModuleInit(){this.setupDataRefreshInterval()}setupDataRefreshInterval(){this.intervalId||(this.intervalId=setInterval((async()=>{await this.fetchDataAndUpdate()}),500))}async fetchDataAndUpdate(){try{if(u.refreshDataMap){u.refreshDataMap=!1;try{u.resultMap=await this.mapRepository.find(),this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateMap",u.resultMap)}catch(e){console.log(e)}}}catch(e){console.log(e)}}async getData(){return u.resultMap}async insertMap(e){try{e._id="a"+Math.random().toString(36);const t=this.mapRepository.create(e);return await this.mapRepository.save(t),u.refreshDataMap=!0,{result:"success",message:"Add Map Success",data:{}}}catch(e){return console.log(e),{result:"error",data:{},message:e.message}}}async updateMap(e){try{return await this.mapRepository.update(e._id,e),u.refreshDataMap=!0,{result:"success",message:"Update Map Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}async deleteMap(e){try{return await this.mapRepository.delete(e),u.refreshDataMap=!0,{result:"success",message:"Delete Map Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.ScadaMapService=p,t.ScadaMapService=p=a([(0,n.Injectable)(),i(0,(0,o.InjectRepository)(c.MapEntity)),s("design:paramtypes",[l.Repository,d.SocketGateway])],p)},9893:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaMemonicController=void 0;const n=r(3563),o=r(1918);let l=class{constructor(e){this.scadaMemonicService=e}getData(){return this.scadaMemonicService.getData()}insertMemonic(e){return this.scadaMemonicService.insertMemonic(e)}updateMemonic(e){return this.scadaMemonicService.updateMemonic(e)}deleteMemonic(e){return this.scadaMemonicService.deleteMemonic(e)}};t.ScadaMemonicController=l,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getData",null),a([(0,n.Post)("/insert"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"insertMemonic",null),a([(0,n.Put)("/update"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"updateMemonic",null),a([(0,n.Delete)("/delete"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"deleteMemonic",null),t.ScadaMemonicController=l=a([(0,n.Controller)("memonic"),s("design:paramtypes",[o.ScadaMemonicService])],l)},8982:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.MemonicEntity=void 0;const i=r(3132);let n=class{};t.MemonicEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"indexPLC",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"typeMemonic",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"tag",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"nameVariable",void 0),t.MemonicEntity=n=a([(0,i.Entity)("Memonic")],n)},6173:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaMemonicModule=void 0;const s=r(3563),i=r(9893),n=r(1918),o=r(2449),l=r(9522),c=r(8982);let d=class{};t.ScadaMemonicModule=d,t.ScadaMemonicModule=d=a([(0,s.Module)({imports:[l.TypeOrmModule.forFeature([c.MemonicEntity]),o.SocketIoModule],controllers:[i.ScadaMemonicController],providers:[n.ScadaMemonicService]})],d)},1918:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaMemonicService=void 0;const n=r(3563),o=r(9522),l=r(3132),c=r(8982),d=r(7247),u=r(6277);let p=class{constructor(e,t){this.memonicRepository=e,this.socketGateway=t}onModuleInit(){this.setupDataRefreshInterval()}setupDataRefreshInterval(){this.intervalId||(this.intervalId=setInterval((async()=>{await this.fetchDataAndUpdate()}),500))}async fetchDataAndUpdate(){try{if(u.refreshDataMemonic){u.refreshDataMemonic=!1;try{u.resultmemonic=await this.memonicRepository.find(),this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateMemonic",u.resultmemonic)}catch(e){console.log(e)}}}catch(e){console.log(e)}}async getData(){return u.resultmemonic}async insertMemonic(e){try{e._id="a"+Math.random().toString(36);const t=this.memonicRepository.create(e);return await this.memonicRepository.save(t),u.refreshDataMemonic=!0,{result:"success",message:"Add Memonic Success",data:{}}}catch(e){return console.log(e),{result:"error",data:{},message:e.message}}}async updateMemonic(e){try{return await this.memonicRepository.update(e._id,e),u.refreshDataMemonic=!0,{result:"success",message:"Update Memonic Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}async deleteMemonic(e){try{return await this.memonicRepository.delete(e),u.refreshDataMemonic=!0,{result:"success",message:"Delete Memonic Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.ScadaMemonicService=p,t.ScadaMemonicService=p=a([(0,n.Injectable)(),i(0,(0,o.InjectRepository)(c.MemonicEntity)),s("design:paramtypes",[l.Repository,d.SocketGateway])],p)},4893:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaPanelController=void 0;const n=r(3563),o=r(6182);let l=class{constructor(e){this.scadaPanelService=e}getData(){return this.scadaPanelService.getData()}insertPanel(e){return this.scadaPanelService.insertPanel(e)}updatePanel(e){return this.scadaPanelService.updatePanel(e)}deletePanel(e){return this.scadaPanelService.deletePanel(e)}};t.ScadaPanelController=l,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getData",null),a([(0,n.Post)("/insert_panel"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"insertPanel",null),a([(0,n.Put)("/update_panel"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"updatePanel",null),a([(0,n.Delete)("/delete_panel"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"deletePanel",null),t.ScadaPanelController=l=a([(0,n.Controller)("panel"),s("design:paramtypes",[o.ScadaPanelService])],l)},1902:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.PanelEntity=void 0;const i=r(3132);let n=class{};t.PanelEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"parent",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"left",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"top",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"width",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"height",void 0),a([(0,i.Column)({name:"backgroundColor",nullable:!0}),s("design:type",String)],n.prototype,"backgroundColor",void 0),a([(0,i.Column)({name:"borderRadius",nullable:!0}),s("design:type",String)],n.prototype,"borderRadius",void 0),a([(0,i.Column)({name:"boxShadow1",nullable:!0}),s("design:type",String)],n.prototype,"boxShadow1",void 0),a([(0,i.Column)({name:"boxShadow2",nullable:!0}),s("design:type",String)],n.prototype,"boxShadow2",void 0),a([(0,i.Column)({name:"boxShadow3",nullable:!0}),s("design:type",String)],n.prototype,"boxShadow3",void 0),a([(0,i.Column)({name:"boxShadowColor",nullable:!0}),s("design:type",String)],n.prototype,"boxShadowColor",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"zIndex",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"margin",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"padding",void 0),a([(0,i.Column)({name:"idGroupControl",nullable:!0}),s("design:type",String)],n.prototype,"idGroupControl",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"cssCode",void 0),t.PanelEntity=n=a([(0,i.Entity)("Panel")],n)},3397:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaPanelModule=void 0;const s=r(3563),i=r(6182),n=r(4893),o=r(2449),l=r(9522),c=r(1902);let d=class{};t.ScadaPanelModule=d,t.ScadaPanelModule=d=a([(0,s.Module)({imports:[l.TypeOrmModule.forFeature([c.PanelEntity]),o.SocketIoModule],providers:[i.ScadaPanelService],controllers:[n.ScadaPanelController]})],d)},6182:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaPanelService=void 0;const n=r(3563),o=r(9522),l=r(3132),c=r(1902),d=r(7247),u=r(6277);let p=class{constructor(e,t){this.panelRepository=e,this.socketGateway=t}onModuleInit(){this.setupDataRefreshInterval()}setupDataRefreshInterval(){this.intervalId||(this.intervalId=setInterval((async()=>{await this.fetchDataAndUpdate()}),500))}async fetchDataAndUpdate(){try{if(u.refreshDataPanel){u.refreshDataPanel=!1;try{u.resultPanel=await this.panelRepository.find(),this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdatePanel",u.resultPanel)}catch(e){console.log(e)}}}catch(e){console.log(e)}}async getData(){return u.resultPanel}async insertPanel(e){try{e._id="a"+Math.random().toString(36);const t=this.panelRepository.create(e);return await this.panelRepository.save(t),u.refreshDataPanel=!0,{result:"success",message:"Add Panel Success",data:{}}}catch(e){return console.log(e),{result:"error",data:{},message:e.message}}}async updatePanel(e){try{return await this.panelRepository.update(e._id,e),u.refreshDataPanel=!0,{result:"success",message:"Update Panel Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}async deletePanel(e){try{return await this.panelRepository.delete(e),u.refreshDataPanel=!0,{result:"success",message:"Delete Panel Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.ScadaPanelService=p,t.ScadaPanelService=p=a([(0,n.Injectable)(),i(0,(0,o.InjectRepository)(c.PanelEntity)),s("design:paramtypes",[l.Repository,d.SocketGateway])],p)},6052:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaSetupAlarmRefreshService=void 0;const i=r(3563),n=r(7247),o=r(6277);let l=class{constructor(e){this.socketGateway=e}refreshData(){let e=!1;try{if(Array.isArray(o.haveChangeArrBitAdjust_SetupAlarm))for(let t=0;t<o.haveChangeArrBitAdjust_SetupAlarm.length;t++)if(o.haveChangeArrBitAdjust_SetupAlarm[t]){if(e=!1,o.haveChangeArrBitAdjust_SetupAlarm[t]=!1,o.resultSetupAlarmTable_BitAdjust=[],Array.isArray(o.resultSetupAlarm))for(let e=0;e<o.resultSetupAlarm.length;e++)!isNaN(o.resultSetupAlarm[e].idDevice)&&"BitAdjust"==o.resultSetupAlarm[e].typeVariable&&o.BitAdjust[parseInt(o.resultSetupAlarm[e].idDevice)]&&parseInt(o.resultSetupAlarm[e].tag)<=o.BitAdjust[parseInt(o.resultSetupAlarm[e].idDevice)].length&&(parseInt(o.resultSetupAlarm[e].alarmAtOn)&&o.BitAdjust[parseInt(o.resultSetupAlarm[e].idDevice)][parseInt(o.resultSetupAlarm[e].tag)]&&o.resultSetupAlarmTable_BitAdjust.push({_id:o.resultSetupAlarm[e]._id,typeVariable:"BitAdjust",idDevice:o.resultSetupAlarm[e].idDevice,tag:o.resultSetupAlarm[e].tag,alarmText:o.resultSetupAlarm[e].alarmText,typeAlarm:o.resultSetupAlarm[e].typeAlarm}),parseInt(o.resultSetupAlarm[e].alarmAtOff)&&!o.BitAdjust[parseInt(o.resultSetupAlarm[e].idDevice)][parseInt(o.resultSetupAlarm[e].tag)]&&o.resultSetupAlarmTable_BitAdjust.push({_id:o.resultSetupAlarm[e]._id,typeVariable:"BitAdjust",idDevice:o.resultSetupAlarm[e].idDevice,tag:o.resultSetupAlarm[e].tag,alarmText:o.resultSetupAlarm[e].alarmText,typeAlarm:o.resultSetupAlarm[e].typeAlarm}),o.resultSetupAlarm[e].oldValue!==o.BitAdjust[parseInt(o.resultSetupAlarm[e].idDevice)][parseInt(o.resultSetupAlarm[e].tag)]&&(o.resultSetupAlarm[e].oldValue=o.BitAdjust[parseInt(o.resultSetupAlarm[e].idDevice)][parseInt(o.resultSetupAlarm[e].tag)],parseInt(o.resultSetupAlarm[e].alarmAtOn)&&!isNaN(o.resultSetupAlarm[e].oldValue)&&o.resultSetupAlarm[e].oldValue&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("Server-Send-Snackbar",{status:o.resultSetupAlarm[e].typeAlarm,message:o.resultSetupAlarm[e].alarmText}),!parseInt(o.resultSetupAlarm[e].alarmAtOff)||isNaN(o.resultSetupAlarm[e].oldValue)||o.resultSetupAlarm[e].oldValue||this.socketGateway.server.emit("Server-Send-Snackbar",{status:o.resultSetupAlarm[e].typeAlarm,message:o.resultSetupAlarm[e].alarmText})));o.resultSetupAlarmTable=[...o.resultSetupAlarmTable_BitAdjust,...o.resultSetupAlarmTable_BitDisplay],this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateSetupAlarmTable",o.resultSetupAlarmTable)}}catch(e){console.log(e)}try{if(Array.isArray(o.haveChangeArrBitDisplay_SetupAlarm))for(let t=0;t<o.haveChangeArrBitDisplay_SetupAlarm.length;t++)if(o.haveChangeArrBitDisplay_SetupAlarm[t]){if(e=!1,o.haveChangeArrBitDisplay_SetupAlarm[t]=!1,o.resultSetupAlarmTable_BitDisplay=[],Array.isArray(o.resultSetupAlarm))for(let e=0;e<o.resultSetupAlarm.length;e++)!isNaN(o.resultSetupAlarm[e].idDevice)&&"BitDisplay"==o.resultSetupAlarm[e].typeVariable&&o.BitDisplay[parseInt(o.resultSetupAlarm[e].idDevice)]&&parseInt(o.resultSetupAlarm[e].tag)<=o.BitDisplay[parseInt(o.resultSetupAlarm[e].idDevice)].length&&(parseInt(o.resultSetupAlarm[e].alarmAtOn)&&o.BitDisplay[parseInt(o.resultSetupAlarm[e].idDevice)][parseInt(o.resultSetupAlarm[e].tag)]&&o.resultSetupAlarmTable_BitDisplay.push({_id:o.resultSetupAlarm[e]._id,typeVariable:"BitDisplay",idDevice:o.resultSetupAlarm[e].idDevice,tag:o.resultSetupAlarm[e].tag,alarmText:o.resultSetupAlarm[e].alarmText,typeAlarm:o.resultSetupAlarm[e].typeAlarm}),parseInt(o.resultSetupAlarm[e].alarmAtOff)&&!o.BitDisplay[parseInt(o.resultSetupAlarm[e].idDevice)][parseInt(o.resultSetupAlarm[e].tag)]&&o.resultSetupAlarmTable_BitDisplay.push({_id:o.resultSetupAlarm[e]._id,typeVariable:"BitDisplay",idDevice:o.resultSetupAlarm[e].idDevice,tag:o.resultSetupAlarm[e].tag,alarmText:o.resultSetupAlarm[e].alarmText,typeAlarm:o.resultSetupAlarm[e].typeAlarm}),o.resultSetupAlarm[e].oldValue!==o.BitDisplay[parseInt(o.resultSetupAlarm[e].idDevice)][parseInt(o.resultSetupAlarm[e].tag)]&&(o.resultSetupAlarm[e].oldValue=o.BitDisplay[parseInt(o.resultSetupAlarm[e].idDevice)][parseInt(o.resultSetupAlarm[e].tag)],parseInt(o.resultSetupAlarm[e].alarmAtOn)&&!isNaN(o.resultSetupAlarm[e].oldValue)&&o.resultSetupAlarm[e].oldValue&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("Server-Send-Snackbar",{status:o.resultSetupAlarm[e].typeAlarm,message:o.resultSetupAlarm[e].alarmText}),!parseInt(o.resultSetupAlarm[e].alarmAtOff)||isNaN(o.resultSetupAlarm[e].oldValue)||o.resultSetupAlarm[e].oldValue||this.socketGateway.server.emit("Server-Send-Snackbar",{status:o.resultSetupAlarm[e].typeAlarm,message:o.resultSetupAlarm[e].alarmText})));o.resultSetupAlarmTable=[...o.resultSetupAlarmTable_BitAdjust,...o.resultSetupAlarmTable_BitDisplay],this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateSetupAlarmTable",o.resultSetupAlarmTable)}}catch(e){console.log(e)}}};t.ScadaSetupAlarmRefreshService=l,t.ScadaSetupAlarmRefreshService=l=a([(0,i.Injectable)(),s("design:paramtypes",[n.SocketGateway])],l)},8773:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaSetupAlarmController=void 0;const n=r(3563),o=r(5662);let l=class{constructor(e){this.scadaSetupAlarmService=e}getData(){return this.scadaSetupAlarmService.getData()}getDataSetupAlarmTable(){return this.scadaSetupAlarmService.getDataSetupAlarmTable()}insertSetupAlarm(e){return console.log(e),this.scadaSetupAlarmService.insertSetupAlarm(e)}updateSetupAlarm(e){return this.scadaSetupAlarmService.updateSetupAlarm(e)}deleteSetupAlarm(e){return this.scadaSetupAlarmService.deleteSetupAlarm(e)}};t.ScadaSetupAlarmController=l,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getData",null),a([(0,n.Get)("/getdata_setupAlarmTable"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getDataSetupAlarmTable",null),a([(0,n.Post)("/insert_setupAlarm"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"insertSetupAlarm",null),a([(0,n.Put)("/update_setupAlarm"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"updateSetupAlarm",null),a([(0,n.Delete)("/delete_setupAlarm"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"deleteSetupAlarm",null),t.ScadaSetupAlarmController=l=a([(0,n.Controller)("setupAlarm"),s("design:paramtypes",[o.ScadaSetupAlarmService])],l)},7222:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.SetupAlarmEntity=void 0;const i=r(3132);let n=class{};t.SetupAlarmEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"typeVariable",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"typeAlarm",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"tag",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"idDevice",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"oldValue",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"alarmText",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"alarmAtOn",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"alarmAtOff",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"saveAlarm",void 0),t.SetupAlarmEntity=n=a([(0,i.Entity)("SetupAlarm")],n)},6461:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaSetupAlarmModule=void 0;const s=r(3563),i=r(8773),n=r(5662),o=r(2449),l=r(9522),c=r(7222);let d=class{};t.ScadaSetupAlarmModule=d,t.ScadaSetupAlarmModule=d=a([(0,s.Module)({imports:[l.TypeOrmModule.forFeature([c.SetupAlarmEntity]),o.SocketIoModule],controllers:[i.ScadaSetupAlarmController],providers:[n.ScadaSetupAlarmService]})],d)},5662:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaSetupAlarmService=void 0;const n=r(3563),o=r(9522),l=r(3132),c=r(7222),d=r(7247),u=r(6277);let p=class{constructor(e,t){this.setupAlarmRepository=e,this.socketGateway=t}onModuleInit(){this.setupDataRefreshInterval()}setupDataRefreshInterval(){this.intervalId||(this.intervalId=setInterval((async()=>{await this.fetchDataAndUpdate()}),500))}async fetchDataAndUpdate(){try{if(u.refreshDataSetupAlarm){u.refreshDataSetupAlarm=!1;try{u.resultSetupAlarm=await this.setupAlarmRepository.find(),this.socketGateway&&this.socketGateway.server&&(this.socketGateway.server.emit("UpdateSetupAlarm",u.resultSetupAlarm),u.OldBitDisplay=[],u.OldBitAdjust=[],u.OldWordDisplay=[],u.OldWordAdjust=[])}catch(e){console.log(e)}}}catch(e){console.log(e)}}async getData(){return u.resultSetupAlarm}async getDataSetupAlarmTable(){return u.resultSetupAlarmTable}async insertSetupAlarm(e){try{e._id="a"+Math.random().toString(36),e.oldValue=-1,console.log(e);const t=this.setupAlarmRepository.create(e);return await this.setupAlarmRepository.save(t),u.refreshDataSetupAlarm=!0,{result:"success",message:"Add SetupAlarm Success",data:{}}}catch(e){return console.log(e),{result:"error",data:{},message:e.message}}}async updateSetupAlarm(e){try{return await this.setupAlarmRepository.update(e._id,e),u.refreshDataSetupAlarm=!0,{result:"success",message:"Update SetupAlarm Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}async deleteSetupAlarm(e){try{return await this.setupAlarmRepository.delete(e),u.refreshDataSetupAlarm=!0,{result:"success",message:"Delete SetupAlarm Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.ScadaSetupAlarmService=p,t.ScadaSetupAlarmService=p=a([(0,n.Injectable)(),i(0,(0,o.InjectRepository)(c.SetupAlarmEntity)),s("design:paramtypes",[l.Repository,d.SocketGateway])],p)},9446:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaStringRefreshService=void 0;const i=r(3563),n=r(7247),o=r(6277);let l=class{constructor(e){this.socketGateway=e}refreshData(){let e=!1;if(Array.isArray(o.haveChangeArrString))for(let t=0;t<o.haveChangeArrString.length;t++)if(o.haveChangeArrString[t]){if(o.haveChangeArrString[t]=!1,Array.isArray(o.resultString))for(let t=0;t<o.resultString.length;t++)!isNaN(o.resultString[t].idDevice)&&o.ListString[parseInt(o.resultString[t].idDevice)]&&(o.resultString[t].tag<=o.ListString[parseInt(o.resultString[t].idDevice)].length&&(o.resultString[t].text=o.ListString[parseInt(o.resultString[t].idDevice)][o.resultString[t].tag]),e=!0);if(e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateString",o.resultString),e=!1,Array.isArray(o.resultProjectScreen_String))for(let t=0;t<o.resultProjectScreen_String.length;t++)!isNaN(o.resultProjectScreen_String[t].idDevice)&&o.ListString[parseInt(o.resultProjectScreen_String[t].idDevice)]&&o.resultProjectScreen_String[t].tag<=o.ListString[parseInt(o.resultProjectScreen_String[t].idDevice)].length&&(o.resultProjectScreen_String[t].text=o.ListString[parseInt(o.resultProjectScreen_String[t].idDevice)][o.resultProjectScreen_String[t].tag],e=!0);e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateScreen_String",o.resultProjectScreen_String)}}};t.ScadaStringRefreshService=l,t.ScadaStringRefreshService=l=a([(0,i.Injectable)(),s("design:paramtypes",[n.SocketGateway])],l)},491:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaStringController=void 0;const n=r(3563),o=r(5384);let l=class{constructor(e){this.scadaStringService=e}getData(){return this.scadaStringService.getData()}insertString(e){return this.scadaStringService.insertString(e)}updateString(e){return this.scadaStringService.updateString(e)}deleteString(e){return this.scadaStringService.deleteString(e)}};t.ScadaStringController=l,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getData",null),a([(0,n.Post)("/insert_string"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"insertString",null),a([(0,n.Put)("/update_string"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"updateString",null),a([(0,n.Delete)("/delete_string"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"deleteString",null),t.ScadaStringController=l=a([(0,n.Controller)("string"),s("design:paramtypes",[o.ScadaStringService])],l)},5392:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.StringEntity=void 0;const i=r(3132);let n=class{};t.StringEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"parent",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"tag",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"left",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"top",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"width",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"height",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"text",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"color",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"fontSize",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"speedScroll",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"lengthScroll",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"zIndex",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"idGroupControl",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"idDevice",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"colorText",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"colorBackground",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"borderRadius",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"cssCode",void 0),t.StringEntity=n=a([(0,i.Entity)("String")],n)},4879:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaStringModule=void 0;const s=r(3563),i=r(491),n=r(5384),o=r(2449),l=r(9522),c=r(5392);let d=class{};t.ScadaStringModule=d,t.ScadaStringModule=d=a([(0,s.Module)({imports:[l.TypeOrmModule.forFeature([c.StringEntity]),o.SocketIoModule],controllers:[i.ScadaStringController],providers:[n.ScadaStringService]})],d)},5384:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaStringService=void 0;const n=r(3563),o=r(9522),l=r(3132),c=r(5392),d=r(7247),u=r(6277);let p=class{constructor(e,t){this.stringRepository=e,this.socketGateway=t}onModuleInit(){this.setupDataRefreshInterval()}setupDataRefreshInterval(){this.intervalId||(this.intervalId=setInterval((async()=>{await this.fetchDataAndUpdate()}),500))}async fetchDataAndUpdate(){try{if(u.refreshDataString){u.refreshDataString=!1;try{u.resultString=await this.stringRepository.find(),this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateString",u.resultString),u.OldListString=[]}catch(e){console.log(e)}}}catch(e){console.log(e)}}async getData(){return u.resultString}async insertString(e){try{e._id="a"+Math.random().toString(36),e.text="---";const t=this.stringRepository.create(e);return await this.stringRepository.save(t),u.refreshDataString=!0,{result:"success",message:"Add String Success",data:{}}}catch(e){return console.log(e),{result:"error",data:{},message:e.message}}}async updateString(e){try{return await this.stringRepository.update(e._id,e),u.refreshDataString=!0,{result:"success",message:"Update String Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}async deleteString(e){try{return await this.stringRepository.delete(e),u.refreshDataString=!0,{result:"success",message:"Delete String Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.ScadaStringService=p,t.ScadaStringService=p=a([(0,n.Injectable)(),i(0,(0,o.InjectRepository)(c.StringEntity)),s("design:paramtypes",[l.Repository,d.SocketGateway])],p)},3044:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaTextFieldRefreshService=void 0;const i=r(3563),n=r(7247),o=r(6277);let l=class{constructor(e){this.socketGateway=e}refreshData(){let e=!1;if(Array.isArray(o.haveChangeArrTextField))for(let t=0;t<o.haveChangeArrTextField.length;t++)if(o.haveChangeArrTextField[t]){if(o.haveChangeArrTextField[t]=!1,Array.isArray(o.resultTextField))for(let t=0;t<o.resultTextField.length;t++)!isNaN(o.resultTextField[t].idDevice)&&o.TextField[parseInt(o.resultTextField[t].idDevice)]&&o.resultTextField[t].tag<=o.TextField[parseInt(o.resultTextField[t].idDevice)].length&&(o.resultTextField[t].text=o.TextField[parseInt(o.resultTextField[t].idDevice)][o.resultTextField[t].tag],e=!0);e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateTextField",o.resultTextField)}}};t.ScadaTextFieldRefreshService=l,t.ScadaTextFieldRefreshService=l=a([(0,i.Injectable)(),s("design:paramtypes",[n.SocketGateway])],l)},7893:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaTextFieldController=void 0;const n=r(3563),o=r(6974);let l=class{constructor(e){this.scadaTextFieldService=e}getData(){return this.scadaTextFieldService.getData()}insertTextField(e){return this.scadaTextFieldService.insertTextField(e)}updateTextField(e){return this.scadaTextFieldService.updateTextField(e)}deleteTextField(e){return this.scadaTextFieldService.deleteTextField(e)}};t.ScadaTextFieldController=l,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getData",null),a([(0,n.Post)("/insert_textField"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"insertTextField",null),a([(0,n.Put)("/update_textField"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"updateTextField",null),a([(0,n.Delete)("/delete_textField"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"deleteTextField",null),t.ScadaTextFieldController=l=a([(0,n.Controller)("textField"),s("design:paramtypes",[o.ScadaTextFieldService])],l)},9094:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.TextFieldEntity=void 0;const i=r(3132);let n=class{};t.TextFieldEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"parent",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"tag",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"left",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"top",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"width",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"height",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"text",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"color",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"fontSize",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"rows",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"zIndex",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"idGroupControl",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"idDevice",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"colorText",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"colorBackground",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"borderRadius",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"cssCode",void 0),t.TextFieldEntity=n=a([(0,i.Entity)("TextField")],n)},6285:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaTextFieldModule=void 0;const s=r(3563),i=r(7893),n=r(6974),o=r(2449),l=r(9522),c=r(9094);let d=class{};t.ScadaTextFieldModule=d,t.ScadaTextFieldModule=d=a([(0,s.Module)({imports:[l.TypeOrmModule.forFeature([c.TextFieldEntity]),o.SocketIoModule],controllers:[i.ScadaTextFieldController],providers:[n.ScadaTextFieldService]})],d)},6974:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaTextFieldService=void 0;const n=r(3563),o=r(9522),l=r(3132),c=r(9094),d=r(7247),u=r(6277);let p=class{constructor(e,t){this.textFieldRepository=e,this.socketGateway=t}onModuleInit(){this.setupDataRefreshInterval()}setupDataRefreshInterval(){this.intervalId||(this.intervalId=setInterval((async()=>{await this.fetchDataAndUpdate()}),500))}async fetchDataAndUpdate(){try{if(u.refreshDataTextField){u.refreshDataTextField=!1;try{u.resultTextField=await this.textFieldRepository.find(),this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateTextField",u.resultTextField),u.OldTextField=[]}catch(e){console.log(e)}}}catch(e){console.log(e)}}async getData(){return u.resultTextField}async insertTextField(e){try{e._id="a"+Math.random().toString(36),e.text="";const t=this.textFieldRepository.create(e);return await this.textFieldRepository.save(t),u.refreshDataTextField=!0,{result:"success",message:"Add TextField Success",data:{}}}catch(e){return console.log(e),{result:"error",data:{},message:e.message}}}async updateTextField(e){try{return await this.textFieldRepository.update(e._id,e),u.refreshDataTextField=!0,{result:"success",message:"Update TextField Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}async deleteTextField(e){try{return await this.textFieldRepository.delete(e),u.refreshDataTextField=!0,{result:"success",message:"Delete TextField Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.ScadaTextFieldService=p,t.ScadaTextFieldService=p=a([(0,n.Injectable)(),i(0,(0,o.InjectRepository)(c.TextFieldEntity)),s("design:paramtypes",[l.Repository,d.SocketGateway])],p)},7691:function(e,t,r){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,s)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||a(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),s(r(1151),t)},1151:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.AuthDTO=void 0;const i=r(7403);class n{}t.AuthDTO=n,a([(0,i.IsNotEmpty)(),s("design:type",String)],n.prototype,"name",void 0),a([(0,i.IsString)(),(0,i.IsNotEmpty)(),s("design:type",String)],n.prototype,"password",void 0)},8987:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaUserController=void 0;const n=r(3563),o=r(7208),l=r(7691);let c=class{constructor(e){this.scadaUserService=e}getData(){return this.scadaUserService.getData()}signup(e){return this.scadaUserService.signup(e)}signin(e){return this.scadaUserService.signin(e)}userCheck(e){return this.scadaUserService.verify(e.token)}updateUser(e){return this.scadaUserService.updateUser(e)}};t.ScadaUserController=c,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],c.prototype,"getData",null),a([(0,n.Post)("signup"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[l.AuthDTO]),s("design:returntype",void 0)],c.prototype,"signup",null),a([(0,n.Post)("signin"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[l.AuthDTO]),s("design:returntype",void 0)],c.prototype,"signin",null),a([(0,n.Post)("userVerify"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],c.prototype,"userCheck",null),a([(0,n.Put)("/update_user"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],c.prototype,"updateUser",null),t.ScadaUserController=c=a([(0,n.Controller)("user"),s("design:paramtypes",[o.ScadaUserService])],c)},1520:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.UserEntity=void 0;const i=r(3132);let n=class{};t.UserEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)(),s("design:type",String)],n.prototype,"name",void 0),a([(0,i.Column)(),s("design:type",String)],n.prototype,"password",void 0),a([(0,i.Column)(),s("design:type",Number)],n.prototype,"levelUser",void 0),t.UserEntity=n=a([(0,i.Entity)("User")],n)},4831:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaUserModule=void 0;const s=r(3563),i=r(9522),n=r(8987),o=r(7208),l=r(1520),c=r(6815),d=r(7755),u=r(1903);let p=class{};t.ScadaUserModule=p,t.ScadaUserModule=p=a([(0,s.Module)({imports:[u.ConfigModule,i.TypeOrmModule.forFeature([l.UserEntity]),c.JwtModule.register({global:!0,secret:"123123",signOptions:{expiresIn:"1d"}})],controllers:[n.ScadaUserController],providers:[o.ScadaUserService,d.JwtStrategy]})],p)},7208:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaUserService=void 0;const n=r(3563),o=r(4329),l=r(9522),c=r(3132),d=r(1520),u=r(6815);let p=class{constructor(e,t){this.userRepository=e,this.jwtService=t}async getData(){return this.userRepository.find()}async signup(e){const t=await o.hash(e.password);try{const r=this.userRepository.create({_id:"a"+Math.random().toString(36),name:e.name,password:t,levelUser:0});return await this.userRepository.save(r),{result:"success",message:"Create Account Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}async signin(e){const{name:t,password:r}=e;if("ADMIN"===t&&"1101111010"===r){const e={_id:"123",name:"admin",password:"",levelUser:0,token:""},t="123";return e.token=t,delete e.password,{result:"success",message:"SignIn Success",data:e}}let a=await this.userRepository.createQueryBuilder("User").where("name = :name",{name:t}).getOne();if(!a)throw new n.NotFoundException("User not found");if(!await o.verify(a.password,r))throw new n.ForbiddenException("Incorrect credentials");let s=await this.signJwtToken(a._id,a.name,a.levelUser);return{result:"success",message:"SignIn Success",data:{name:a.name,password:a.password,levelUser:a.levelUser,token:s}}}async signJwtToken(e,t,r){const a={sub:e,name:t,levelUser:r};return{accessToken:await this.jwtService.signAsync(a,{expiresIn:"1d",secret:"123123"})}}async verify(e){try{let t=await this.jwtService.verifyAsync(e);return{result:"success",message:"SignIn Success",data:{name:t.name,levelUser:t.levelUser}}}catch(e){return{result:"error",message:"verify error",data:{}}}}async updateUser(e){try{return await this.userRepository.update(e._id,e),{result:"success",message:"Update User Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.ScadaUserService=p,t.ScadaUserService=p=a([(0,n.Injectable)(),i(0,(0,l.InjectRepository)(d.UserEntity)),s("design:paramtypes",[c.Repository,u.JwtService])],p)},7755:function(e,t,r){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,r,a){void 0===a&&(a=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,a,s)}:function(e,t,r,a){void 0===a&&(a=r),e[a]=t[r]}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||a(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),s(r(1023),t)},1023:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JwtStrategy=void 0;const n=r(3563),o=r(9520),l=r(2714),c=r(9522),d=r(3132),u=r(1520),p=r(2664);let y=class extends((0,o.PassportStrategy)(l.Strategy,"jwt")){constructor(e,t){super({jwtFromRequest:l.ExtractJwt.fromAuthHeaderAsBearerToken(),secretOrKey:t.get("JWT_SECRET")}),this.userRepository=e}async validate(e){console.log("1231231231313");const t=await this.userRepository.findOneBy({_id:e.sub});return console.log("User"),console.log(t),delete t.password,t}};t.JwtStrategy=y,t.JwtStrategy=y=a([(0,n.Injectable)(),i(0,(0,c.InjectRepository)(u.UserEntity)),s("design:paramtypes",[d.Repository,p.ConfigService])],y)},5324:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaWordAdjustRefreshService=void 0;const i=r(3563),n=r(7247),o=r(6277);let l=class{constructor(e){this.socketGateway=e}refreshData(){let e=!1;if(Array.isArray(o.haveChangeArrWordAdjust))for(let t=0;t<o.haveChangeArrWordAdjust.length;t++)try{if(o.haveChangeArrWordAdjust[t]){if(e=!1,o.haveChangeArrWordAdjust[t]=!1,this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("WordAdjust",o.WordAdjust),Array.isArray(o.resultWordAdjust))for(let r=0;r<o.resultWordAdjust.length;r++)"0"===o.resultWordAdjust[r].idDevice&&0==t?Array.isArray(o.WordAdjust[0])&&o.WordAdjust[0]&&o.resultWordAdjust[r].tag<=o.WordAdjust[0].length&&(parseInt(o.resultWordAdjust[r].negative)&&parseInt(o.WordAdjust[0][o.resultWordAdjust[r].tag])>32767?o.resultWordAdjust[r].text=parseInt(o.WordAdjust[0][o.resultWordAdjust[r].tag])-65536:o.resultWordAdjust[r].text=o.WordAdjust[0][o.resultWordAdjust[r].tag],e=!0):parseInt(o.resultWordAdjust[r].idDevice)&&t>0&&o.WordAdjust[parseInt(o.resultWordAdjust[r].idDevice)]&&o.resultWordAdjust[r].tag<=o.WordAdjust[parseInt(o.resultWordAdjust[r].idDevice)].length&&(parseInt(o.resultWordAdjust[r].negative)&&parseInt(o.WordAdjust[parseInt(o.resultWordAdjust[r].idDevice)][o.resultWordAdjust[r].tag])>32767?o.resultWordAdjust[r].text=parseInt(o.WordAdjust[parseInt(o.resultWordAdjust[r].idDevice)][o.resultWordAdjust[r].tag])-65536:o.resultWordAdjust[r].text=o.WordAdjust[parseInt(o.resultWordAdjust[r].idDevice)][o.resultWordAdjust[r].tag],e=!0);if(e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateWordAdjust",o.resultWordAdjust),e=!1,Array.isArray(o.resultProjectScreen_WordAdjust))for(let t=0;t<o.resultProjectScreen_WordAdjust.length;t++)o.resultProjectScreen_WordAdjust[t].idDevice&&o.WordAdjust[parseInt(o.resultProjectScreen_WordAdjust[t].idDevice)]&&o.resultProjectScreen_WordAdjust[t].tag<o.WordAdjust[parseInt(o.resultProjectScreen_WordAdjust[t].idDevice)].length&&(parseInt(o.resultProjectScreen_WordAdjust[t].negative)&&parseInt(o.WordAdjust[parseInt(o.resultProjectScreen_WordAdjust[t].idDevice)][o.resultProjectScreen_WordAdjust[t].tag])>32767?o.resultProjectScreen_WordAdjust[t].text=parseInt(o.WordAdjust[parseInt(o.resultProjectScreen_WordAdjust[t].idDevice)][o.resultProjectScreen_WordAdjust[t].tag])-65536:o.resultProjectScreen_WordAdjust[t].text=o.WordAdjust[parseInt(o.resultProjectScreen_WordAdjust[t].idDevice)][o.resultProjectScreen_WordAdjust[t].tag],e=!0);e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateScreen_WordAdjust",o.resultProjectScreen_WordAdjust)}}catch(e){console.log("WordAdjust Error Sqlite: "+e)}}};t.ScadaWordAdjustRefreshService=l,t.ScadaWordAdjustRefreshService=l=a([(0,i.Injectable)(),s("design:paramtypes",[n.SocketGateway])],l)},1549:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaWordAdjustController=void 0;const n=r(3563),o=r(726);let l=class{constructor(e){this.scadaWordAdjustService=e}getData(){return this.scadaWordAdjustService.getData()}insertWordAdjust(e){return this.scadaWordAdjustService.insertWordAdjust(e)}updateWordAdjust(e){return this.scadaWordAdjustService.updateWordAdjust(e)}deleteWordAdjust(e){return this.scadaWordAdjustService.deleteWordAdjust(e)}};t.ScadaWordAdjustController=l,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getData",null),a([(0,n.Post)("/insert_wordAdjust"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"insertWordAdjust",null),a([(0,n.Put)("/update_wordAdjust"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"updateWordAdjust",null),a([(0,n.Delete)("/delete_wordAdjust"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"deleteWordAdjust",null),t.ScadaWordAdjustController=l=a([(0,n.Controller)("wordAdjust"),s("design:paramtypes",[o.ScadaWordAdjustService])],l)},5550:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.WordAdjustEntity=void 0;const i=r(3132);let n=class{};t.WordAdjustEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"parent",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"tag",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"text",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"left",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"top",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"width",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"height",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"fontSize",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"idGroupControl",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"unit",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"levelUser",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"divide",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"colorText",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"colorBackground",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"negative",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"idDevice",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"typeDevice",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"enableLogData",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"zIndex",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"borderRadius",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"cssCode",void 0),t.WordAdjustEntity=n=a([(0,i.Entity)("WordAdjust")],n)},5893:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaWordAdjustModule=void 0;const s=r(3563),i=r(1549),n=r(726),o=r(2449),l=r(9522),c=r(5550);let d=class{};t.ScadaWordAdjustModule=d,t.ScadaWordAdjustModule=d=a([(0,s.Module)({imports:[l.TypeOrmModule.forFeature([c.WordAdjustEntity]),o.SocketIoModule],controllers:[i.ScadaWordAdjustController],providers:[n.ScadaWordAdjustService]})],d)},726:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaWordAdjustService=void 0;const n=r(3563),o=r(9522),l=r(3132),c=r(5550),d=r(7247),u=r(6277);let p=class{constructor(e,t){this.wordAdjustRepository=e,this.socketGateway=t}onModuleInit(){this.setupDataRefreshInterval()}setupDataRefreshInterval(){this.intervalId||(this.intervalId=setInterval((async()=>{await this.fetchDataAndUpdate()}),500))}async fetchDataAndUpdate(){try{if(u.refreshDataWordAdjust){u.refreshDataWordAdjust=!1;try{u.resultWordAdjust=await this.wordAdjustRepository.find(),this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateWordAdjust",u.resultWordAdjust),u.OldWordAdjust=[]}catch(e){console.log(e)}}}catch(e){console.log(e)}}async getData(){return u.resultWordAdjust}async insertWordAdjust(e){try{e._id="a"+Math.random().toString(36),e.text=0;const t=this.wordAdjustRepository.create(e);return await this.wordAdjustRepository.save(t),u.refreshDataWordAdjust=!0,{result:"success",message:"Add WordAdjust Success",data:{}}}catch(e){return console.log(e),{result:"error",data:{},message:e.message}}}async updateWordAdjust(e){try{return await this.wordAdjustRepository.update(e._id,e),u.refreshDataWordAdjust=!0,{result:"success",message:"Update WordAdjust Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}async deleteWordAdjust(e){try{return await this.wordAdjustRepository.delete(e),u.refreshDataWordAdjust=!0,{result:"success",message:"Delete WordAdjust Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.ScadaWordAdjustService=p,t.ScadaWordAdjustService=p=a([(0,n.Injectable)(),i(0,(0,o.InjectRepository)(c.WordAdjustEntity)),s("design:paramtypes",[l.Repository,d.SocketGateway])],p)},4774:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaWordDisplayRefreshService=void 0;const i=r(3563),n=r(7247),o=r(6277);let l=class{constructor(e){this.socketGateway=e}refreshData(){let e=!1;if(Array.isArray(o.haveChangeArrWordDisplay))for(let t=0;t<o.haveChangeArrWordDisplay.length;t++)if(o.haveChangeArrWordDisplay[t]){if(e=!1,o.haveChangeArrWordDisplay[t]=!1,Array.isArray(o.resultWordDisplay))for(let r=0;r<o.resultWordDisplay.length;r++)"0"===o.resultWordDisplay[r].idDevice&&0==t?Array.isArray(o.WordDisplay[0])&&o.WordDisplay[0]&&o.resultWordDisplay[r].tag<=o.WordDisplay[0].length&&(parseInt(o.resultWordDisplay[r].negative)&&parseInt(o.WordDisplay[0][o.resultWordDisplay[r].tag])>32767?o.resultWordDisplay[r].text=parseInt(o.WordDisplay[0][o.resultWordDisplay[r].tag])-65536:o.resultWordDisplay[r].text=o.WordDisplay[0][o.resultWordDisplay[r].tag],e=!0):parseInt(o.resultWordDisplay[r].idDevice)&&t>0&&o.WordDisplay[parseInt(o.resultWordDisplay[r].idDevice)]&&o.resultWordDisplay[r].tag<=o.WordDisplay[parseInt(o.resultWordDisplay[r].idDevice)].length&&(parseInt(o.resultWordDisplay[r].negative)&&parseInt(o.WordDisplay[parseInt(o.resultWordDisplay[r].idDevice)][o.resultWordDisplay[r].tag])>32767?o.resultWordDisplay[r].text=parseInt(o.WordDisplay[parseInt(o.resultWordDisplay[r].idDevice)][o.resultWordDisplay[r].tag])-65536:o.resultWordDisplay[r].text=o.WordDisplay[parseInt(o.resultWordDisplay[r].idDevice)][o.resultWordDisplay[r].tag],e=!0);if(e&&this.socketGateway&&this.socketGateway.server&&(this.socketGateway.server.emit("UpdateWordDisplay",o.resultWordDisplay),this.socketGateway.server.emit("UpdateRawWordDisplay",o.WordDisplay)),e=!1,Array.isArray(o.resultProjectScreen_WordDisplay))for(let t=0;t<o.resultProjectScreen_WordDisplay.length;t++)o.resultProjectScreen_WordDisplay[t].idDevice&&o.WordDisplay[parseInt(o.resultProjectScreen_WordDisplay[t].idDevice)]&&o.resultProjectScreen_WordDisplay[t].tag<o.WordDisplay[parseInt(o.resultProjectScreen_WordDisplay[t].idDevice)].length&&(parseInt(o.resultProjectScreen_WordDisplay[t].negative)&&parseInt(o.WordDisplay[parseInt(o.resultProjectScreen_WordDisplay[t].idDevice)][o.resultProjectScreen_WordDisplay[t].tag])>32767?o.resultProjectScreen_WordDisplay[t].text=parseInt(o.WordDisplay[parseInt(o.resultProjectScreen_WordDisplay[t].idDevice)][o.resultProjectScreen_WordDisplay[t].tag])-65536:o.resultProjectScreen_WordDisplay[t].text=o.WordDisplay[parseInt(o.resultProjectScreen_WordDisplay[t].idDevice)][o.resultProjectScreen_WordDisplay[t].tag],e=!0);if(e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateScreen_WordDisplay",o.resultProjectScreen_WordDisplay),e=!1,Array.isArray(o.resultBitDisplay))for(let t=0;t<o.resultBitDisplay.length;t++)o.resultBitDisplay[t].idDevice&&("undefined"!==o.resultBitDisplay[t].tagRotate&&o.WordDisplay[parseInt(o.resultBitDisplay[t].idDevice)]&&o.resultBitDisplay[t].tagRotate<=o.WordDisplay[parseInt(o.resultBitDisplay[t].idDevice)].length&&(o.resultBitDisplay[t].rotate=o.WordDisplay[parseInt(o.resultBitDisplay[t].idDevice)][o.resultBitDisplay[t].tagRotate]),e=!0);if(e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateBitDisplay",o.resultBitDisplay),e=!1,Array.isArray(o.resultProjectScreen_BitDisplay))for(let t=0;t<o.resultProjectScreen_BitDisplay.length;t++)o.resultProjectScreen_BitDisplay[t].idDevice&&("undefined"!==o.resultProjectScreen_BitDisplay[t].tagRotate&&o.WordDisplay[parseInt(o.resultProjectScreen_BitDisplay[t].idDevice)]&&o.resultProjectScreen_BitDisplay[t].tagRotate<=o.WordDisplay[parseInt(o.resultProjectScreen_BitDisplay[t].idDevice)].length&&(o.resultProjectScreen_BitDisplay[t].rotate=o.WordDisplay[parseInt(o.resultProjectScreen_BitDisplay[t].idDevice)][o.resultProjectScreen_BitDisplay[t].tagRotate]),e=!0);e&&this.socketGateway&&this.socketGateway.server&&this.socketGateway.server.emit("UpdateScreen_BitDisplay",o.resultProjectScreen_BitDisplay)}}};t.ScadaWordDisplayRefreshService=l,t.ScadaWordDisplayRefreshService=l=a([(0,i.Injectable)(),s("design:paramtypes",[n.SocketGateway])],l)},9915:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaWordDisplayController=void 0;const n=r(3563),o=r(9e3);let l=class{constructor(e){this.scadaWordDisplayService=e}getData(){return this.scadaWordDisplayService.getData()}getDataRaw(){return this.scadaWordDisplayService.getDataRaw()}insertWordDisplay(e){return this.scadaWordDisplayService.insertWordDisplay(e)}updateWordDisplay(e){return this.scadaWordDisplayService.updateWordDisplay(e)}deleteWordDisplay(e){return this.scadaWordDisplayService.deleteWordDisplay(e)}};t.ScadaWordDisplayController=l,a([(0,n.Get)("/getdata"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getData",null),a([(0,n.Get)("/getdataraw"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],l.prototype,"getDataRaw",null),a([(0,n.Post)("/insert_wordDisplay"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"insertWordDisplay",null),a([(0,n.Put)("/update_wordDisplay"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"updateWordDisplay",null),a([(0,n.Delete)("/delete_wordDisplay"),i(0,(0,n.Body)()),s("design:type",Function),s("design:paramtypes",[Object]),s("design:returntype",void 0)],l.prototype,"deleteWordDisplay",null),t.ScadaWordDisplayController=l=a([(0,n.Controller)("wordDisplay"),s("design:paramtypes",[o.ScadaWordDisplayService])],l)},2e3:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.WordDisplayEntity=void 0;const i=r(3132);let n=class{};t.WordDisplayEntity=n,a([(0,i.PrimaryGeneratedColumn)("uuid"),s("design:type",String)],n.prototype,"_id",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"parent",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"tag",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"text",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"left",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"top",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"width",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"height",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"fontSize",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"noBorder",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"idGroupControl",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"unit",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"divide",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"colorText",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"colorBackground",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"negative",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"idScreen",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"idDevice",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"zIndex",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",Number)],n.prototype,"borderRadius",void 0),a([(0,i.Column)({nullable:!0}),s("design:type",String)],n.prototype,"cssCode",void 0),t.WordDisplayEntity=n=a([(0,i.Entity)("WordDisplay")],n)},5423:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaWordDisplayModule=void 0;const s=r(3563),i=r(9915),n=r(9e3),o=r(2449),l=r(9522),c=r(2e3);let d=class{};t.ScadaWordDisplayModule=d,t.ScadaWordDisplayModule=d=a([(0,s.Module)({imports:[l.TypeOrmModule.forFeature([c.WordDisplayEntity]),o.SocketIoModule],controllers:[i.ScadaWordDisplayController],providers:[n.ScadaWordDisplayService]})],d)},9e3:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},i=this&&this.__param||function(e,t){return function(r,a){t(r,a,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ScadaWordDisplayService=void 0;const n=r(3563),o=r(9522),l=r(3132),c=r(2e3),d=r(7247),u=r(6277);let p=class{constructor(e,t){this.wordDisplayRepository=e,this.socketGateway=t}onModuleInit(){this.setupDataRefreshInterval()}setupDataRefreshInterval(){this.intervalId||(this.intervalId=setInterval((async()=>{await this.fetchDataAndUpdate()}),500))}async fetchDataAndUpdate(){try{if(u.refreshDataWordDisplay){u.refreshDataWordDisplay=!1;try{u.resultWordDisplay=await this.wordDisplayRepository.find(),this.socketGateway&&this.socketGateway.server&&(this.socketGateway.server.emit("UpdateWordDisplay",u.resultWordDisplay),u.OldWordDisplay=[])}catch(e){console.log(e)}}}catch(e){console.log(e)}}async getData(){return u.resultWordDisplay}getDataRaw(){return u.WordDisplay}async insertWordDisplay(e){try{e._id="a"+Math.random().toString(36),e.text=0;const t=this.wordDisplayRepository.create(e);return await this.wordDisplayRepository.save(t),u.refreshDataWordDisplay=!0,{result:"success",message:"Add WordDisplay Success",data:{}}}catch(e){return console.log(e),{result:"error",data:{},message:e.message}}}async updateWordDisplay(e){try{return await this.wordDisplayRepository.update(e._id,e),u.refreshDataWordDisplay=!0,{result:"success",message:"Update WordDisplay Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}async deleteWordDisplay(e){try{return await this.wordDisplayRepository.delete(e),u.refreshDataWordDisplay=!0,{result:"success",message:"Delete WordDisplay Success",data:{}}}catch(e){return{result:"error",data:{},message:e.message}}}};t.ScadaWordDisplayService=p,t.ScadaWordDisplayService=p=a([(0,n.Injectable)(),i(0,(0,o.InjectRepository)(c.WordDisplayEntity)),s("design:paramtypes",[l.Repository,d.SocketGateway])],p)},7247:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.SocketGateway=void 0;const i=r(6134),n=r(4437),o=r(824);let l=class{constructor(e){this.mqttService=e}handleConnection(e,...t){const r=e.id;console.log(`Client connected with ID: ${r}`)}handleDisconnect(e){const t=e.id;console.log(`Client disconnected with ID: ${t}`)}handleMessage(e,t){this.mqttService.publish("Client-send-data",JSON.stringify(t))}};t.SocketGateway=l,a([(0,i.WebSocketServer)(),s("design:type",n.Server)],l.prototype,"server",void 0),a([(0,i.SubscribeMessage)("Client-send-data"),s("design:type",Function),s("design:paramtypes",[Object,Object]),s("design:returntype",void 0)],l.prototype,"handleMessage",null),t.SocketGateway=l=a([(0,i.WebSocketGateway)({transports:["websocket"],port:1234}),s("design:paramtypes",[o.MqttService])],l)},2449:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.SocketIoModule=void 0;const s=r(3563),i=r(7247),n=r(6959);let o=class{};t.SocketIoModule=o,t.SocketIoModule=o=a([(0,s.Module)({imports:[n.MqttModule],providers:[i.SocketGateway],exports:[i.SocketGateway]})],o)},2095:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0}),t.SystemApiController=void 0;const i=r(3563);let n=class{responsesocket(){return{PORT:8001}}};t.SystemApiController=n,a([(0,i.Get)("nodered_port"),s("design:type",Function),s("design:paramtypes",[]),s("design:returntype",void 0)],n.prototype,"responsesocket",null),t.SystemApiController=n=a([(0,i.Controller)("system")],n)},2523:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.SystemApiModule=void 0;const s=r(3563),i=r(2095),n=r(484);let o=class{};t.SystemApiModule=o,t.SystemApiModule=o=a([(0,s.Module)({controllers:[i.SystemApiController],providers:[n.SystemApiService]})],o)},484:function(e,t,r){"use strict";var a=this&&this.__decorate||function(e,t,r,a){var s,i=arguments.length,n=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,r):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,r,a);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(n=(i<3?s(n):i>3?s(t,r,n):s(t,r))||n);return i>3&&n&&Object.defineProperty(t,r,n),n};Object.defineProperty(t,"__esModule",{value:!0}),t.SystemApiService=void 0;const s=r(3563);let i=class{};t.SystemApiService=i,t.SystemApiService=i=a([(0,s.Injectable)()],i)},3563:e=>{"use strict";e.exports=require("@nestjs/common")},8781:e=>{"use strict";e.exports=require("@nestjs/core")},6815:e=>{"use strict";e.exports=require("@nestjs/jwt")},2510:e=>{"use strict";e.exports=require("@nestjs/microservices")},9520:e=>{"use strict";e.exports=require("@nestjs/passport")},9522:e=>{"use strict";e.exports=require("@nestjs/typeorm")},6134:e=>{"use strict";e.exports=require("@nestjs/websockets")},2525:e=>{"use strict";e.exports=require("@node-minify/core")},8124:e=>{"use strict";e.exports=require("@node-minify/uglify-js")},4329:e=>{"use strict";e.exports=require("argon2")},5486:e=>{"use strict";e.exports=require("bcrypt")},7403:e=>{"use strict";e.exports=require("class-validator")},818:e=>{"use strict";e.exports=require("dotenv")},6261:e=>{"use strict";e.exports=require("events")},2630:e=>{"use strict";e.exports=require("mqtt")},4770:e=>{"use strict";e.exports=require("node-red")},2714:e=>{"use strict";e.exports=require("passport-jwt")},4437:e=>{"use strict";e.exports=require("socket.io")},6689:e=>{"use strict";e.exports=require("sqlite3")},333:e=>{"use strict";e.exports=require("systeminformation")},3132:e=>{"use strict";e.exports=require("typeorm")},7194:e=>{"use strict";e.exports=require("dgram")},9896:e=>{"use strict";e.exports=require("fs")},6928:e=>{"use strict";e.exports=require("path")},9023:e=>{"use strict";e.exports=require("util")}},t={};function r(a){var s=t[a];if(void 0!==s)return s.exports;var i=t[a]={exports:{}};return e[a].call(i.exports,i,i.exports,r),i.exports}(()=>{"use strict";const e=r(8781),t=r(3205),a=r(3563),s=r(4770),i=r(6928),n=r(7557),o=r(5547),l=r(6277),c=r(456),d=r(4780),u=r(333),p=r(5486),y=r(9896);var f=!1;const g=r(2664);function m(e,t){return new Promise(((r,a)=>{p.compare(e,t,((e,t)=>{e?a(e):r(t)}))}))}!async function(){const p=await e.NestFactory.create(t.AppModule,{cors:!0});p.useGlobalPipes(new a.ValidationPipe);const h=p.get(g.ConfigService),v=h.get("LICENSE"),D=h.get("User_Nodered");1==(f=await async function(e){try{const t=await u.system();if(""!==t.uuid)return!0===await m(t.uuid+"1101111010",e)?(console.log("Check LICENSE OK"),!0):(console.log("Check LICENSE NG"),o.saveFeedbackFile("./Store/LicenseFeedback.json",t.uuid),c.uuid=t.uuid,!1);if("Docker Container"===t.model){const t=y.readFileSync("/proc/self/cgroup","utf-8").split("\n").filter((e=>e.includes("docker"))).map((e=>e.split("/").pop())).shift();return!0===await m(t+"1101111010",e)?(o.setLogServer(JSON.stringify("Check LICENSE OK")),!0):(o.setLogServer(JSON.stringify("Check LICENSE NG")),o.saveFeedbackFile("./Store/LicenseFeedback.json",t),!1)}return console.log("Can not get UUID"),!1}catch(e){return console.log(e),o.setLogServer(JSON.stringify(e)),o.saveJsonFile("./Store/LicenseFeedback.json",e),!1}}(v))&&(c.active=!0,d.active=!0);const S={uiHost:"0.0.0.0",httpAdminRoot:"/",httpNodeRoot:"/api",userDir:`${i.resolve(__dirname,"..")}/userDir`,functionGlobalContext:{VariableSystem:c,Variable:l,FinsClient:n,SubFunction:o,sqlite3:r(6689).verbose(),active:f,minify:r(2525),uglifyJS:r(8124)},flowFile:"flows.json",adminAuth:{type:"credentials",users:[{username:"admin",password:"$2b$08$RsDv7szxDDyA8om0Naga0e3aQ4dicbhf3X7SIbatlP75XRVZo0I2u",permissions:"*"}],sessionExpiryTime:43200},functionExternalModules:!0,credentialSecret:"LeVanTinh"};if(D){const e=JSON.parse(D);if(Array.isArray(e)){let t=[];e.map((e=>{t.push({username:e.username,password:e.password,permissions:e.permissions})})),S.adminAuth.users=S.adminAuth.users.concat(e)}}s.init(p.getHttpServer(),S),p.use("/",s.httpAdmin),p.use("/api",s.httpNode),s.start(),console.log("================PORT================ "+h.get("PORT")),await p.listen(h.get("PORT"))}()})()})();
//# sourceMappingURL=main.js.map